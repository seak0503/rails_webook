<!DOCTYPE html>
<html
  lang="ja"
data-avail-langs="ja en"

data-page="index"
data-static-domain="https://blog.st-hatena.com"
data-blog="ruby-rails.hatenadiary.com"
data-blog-name="Rails Webook"
data-blogs-uri-base="http://ruby-rails.hatenadiary.com"
data-globalheader-color="b"
data-author="nipe880324"
data-version="228df9a6e5a3ae04fdb53d33befa3556"
data-blog-comments-top-is-new=""
data-plus-available=""



data-admin-domain="http://blog.hatena.ne.jp"

data-brand="hatenablog"

data-has-touch-view="1"


itemscope
itemtype="http://schema.org/Blog"


  data-device="pc"
  data-globalheader-type="pc"
  >
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
    
    
    

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=7; IE=9; IE=10; IE=11" />
    <title>Rails Webook</title>

    

    
      <link rel="canonical" href="index.html"/>
    

    
    

<meta itemprop="name" content="Rails Webook"/>

  <meta itemprop="image" content="https://blog.st-hatena.com/images/theme/og-image-1500.png"/>


    <meta property="og:title" content="Rails Webook"/>
<meta property="og:type" content="blog"/>
<meta property="og:url" content="http://ruby-rails.hatenadiary.com/"/>

  
  
  
  <meta property="og:image" content="https://blog.st-hatena.com/images/theme/og-image-1500.png"/>

  <meta property="og:description" content="自社のECを開発している会社で働いています。Rails情報やサービスを成長させる方法を書いていきます" />
<meta property="og:site_name" content="http://ruby-rails.hatenadiary.com/"/>

        <meta name="twitter:card"   content="gallery" />
    <meta name="twitter:image0" content="http://f.st-hatena.com/images/fotolife/n/nipe880324/20140802/20140802105152.png" />
    <meta name="twitter:image1" content="http://f.st-hatena.com/images/fotolife/n/nipe880324/20140802/20140802105152.png?1406944322" />
    <meta name="twitter:image2" content="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730165107.png" />
    <meta name="twitter:image3" content="https://blog.st-hatena.com/images/theme/og-image-1500.gif" />  <meta name="twitter:title" content="Rails Webook" />  <meta name="twitter:description" content="自社のECを開発している会社で働いています。Rails情報やサービスを成長させる方法を書いていきます" />  <meta name="twitter:app:name:iphone" content="はてなブログアプリ" />
  <meta name="twitter:app:id:iphone" content="583299321" />
  <meta name="twitter:app:url:iphone" content="hatenablog:///open?uri=http%3A%2F%2Fruby-rails.hatenadiary.com%2F%3Fpage%3D1407168000" />  <meta name="twitter:site" content="@nipe032488" />
    
    <meta name="description" content="毎週更新。Railsプログラマがソフトウェア開発を効果的・効率的にするために、分かりやすく・使いやすい形でRailsに関する技術情報を記載。">    <meta name="google-site-verification" content="OyOieuLgSrQckqbACTn_Q3G1dPq6LMlTqBRHa6V1XsA">    <meta name="keywords" content="Rails,Ruby on Rails,gem,Webアプリケーション,開発,構築,運用,インフラ">

    
<script type="text/javascript">
// <!--

if (~navigator.userAgent.indexOf('Mac OS X')) {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27ヒラギノ角ゴ Pro W3\x27, \x27Hiragino Kaku Gothic Pro\x27, sans-serif; } </style>');
} else {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27メイリオ\x27, \x27Meiryo\x27, \x27MS PGothic\x27, sans-serif; } </style>');
}

// -->
</script>

<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->




    <link rel="shortcut icon" href="https://blog.st-hatena.com/images/favicon.ico">
<link rel="icon" sizes="192x192" href="https://blog.st-hatena.com/images/common/meta-icon-global.png">

    
<link rel="alternate" type="application/atom+xml" title="Atom" href="feed"/>
<link rel="alternate" type="application/rss+xml" title="RSS2.0" href="rss.rss"/>


      <link rel="author" href="http://www.hatena.ne.jp/nipe880324/">
    

    <link rel="stylesheet" type="text/css" href="https://blog.st-hatena.com/css/blog.css?version=228df9a6e5a3ae04fdb53d33befa3556"/>

    
  <link rel="stylesheet" type="text/css" href="http://blog.hatena.ne.jp/-/blog_style/12921228815727789780/a052dbbef76fd4380abc811c11814f2d9f990b9a"/>

    <script></script>

    
<style>div#google_afc_user,
  div#google_afc_user_container_0,
  div#google_afc_user_container_1,
  div#google_afc_user_container_2,
  div#google_afc_user_container_3,
  div#google_afc_user_container_4,
  div#google_afc_user_container_5,
  div.google_afc_image,
  div.google_afc_blocklink {
      display: block !important;
  }
</style>


    
  </head>

  <body class="page-index enable-top-editarea enable-bottom-editarea">
    <!-- Google Universal Analytics -->
<script id="google-analytics-script">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29716941-6', 'auto', {'name': 'HatenaBlogTracker', 'sampleRate': 1});
  ga('HatenaBlogTracker.require', 'displayfeatures');
  ga('HatenaBlogTracker.send', 'pageview');
  ga('create', 'UA-29716941-26', 'auto', {'name': 'HatenaBlogSeparatedTracker', 'sampleRate': 10});
  ga('HatenaBlogSeparatedTracker.require', 'displayfeatures');
  ga('HatenaBlogSeparatedTracker.send', 'pageview');

    
      ga('create', 'UA-45988509-6', 'auto', {'name': 'HatenaBlogUserTracker'});
      ga('HatenaBlogUserTracker.require', 'displayfeatures');
      ga('HatenaBlogUserTracker.send', 'pageview');
    
  
  ga('create', 'UA-7855606-1', 'auto', {'name': 'HatenaGlobalTracker', 'sampleRate': 1});
  ga('HatenaGlobalTracker.require', 'displayfeatures');
  ga('HatenaGlobalTracker.send', 'pageview');
</script>
<!-- End Google Universal Analytics -->

    
    <div id="header-container">
     <div id="sp-suggest" style="display: none;"><a id="sp-suggest-link" href="index-page=1407168000.html#">スマートフォン用の表示で見る</a></div>
    </div>

    

<div class="quote-box">
  <div class="tooltip-quote tooltip-quote-star">
    <i class="blogicon-star" title="引用スターをつける"></i>
  </div>
  <div class="tooltip-quote tooltip-quote-stock">
    <i class="blogicon-quote" title="引用をストック"></i>
  </div>
</div>

<div class="message-box" id="quote-star-message-box" style="display: none; position: absolute;">
  スターをつけました
</div>

<div class="quote-stock-panel" id="quote-stock-message-box" style="position: absolute; z-index: 3000">
  <div class="message-box" id="quote-stock-succeeded-message" style="display: none">
    <p>引用をストックしました</p>
    <button class="btn btn-primary" id="quote-stock-show-editor-button" data-track-name="curation-quote-edit-button">ストック一覧を見る</button>
    <button class="btn quote-stock-close-message-button">閉じる</button>
  </div>

  <div class="message-box" id="quote-login-required-message" style="display: none">
    <p>引用するにはまずログインしてください</p>
    <button class="btn btn-primary" id="quote-login-button">ログイン</button>
    <button class="btn quote-stock-close-message-button">閉じる</button>
  </div>

  <div class="error-box" id="quote-stock-failed-message" style="display: none">
    <p>引用をストックできませんでした。再度お試しください</p>
    <button class="btn quote-stock-close-message-button">閉じる</button>
  </div>

  <div class="error-box" id="unstockable-quote-message-box" style="display: none; position: absolute; z-index: 3000;">
    <p>限定公開記事のため引用できません。</p>
  </div>
</div>

<script type="x-underscore-template" id="js-requote-button-template">
  <div class="requote-button js-requote-button">
    <button class="requote-button-btn tipsy-top" title="引用する"><i class="blogicon-quote"></i></button>
  </div>
</script>


    <div id="globalheader-container" >
  <iframe id="globalheader" height="37" frameborder="0" allowTransparency="true"></iframe>
</div>


    
    <div id="hidden-subscribe-button">
      <div class="hatena-follow-button-box btn-subscribe js-hatena-follow-button-box"
  
  >

  <a href="index-page=1407168000.html#" class="hatena-follow-button js-hatena-follow-button">
    <span class="subscribing">
      <span class="foreground">読者です</span>
      <span class="background">読者をやめる</span>
    </span>
    <span class="unsubscribing" data-track-name="profile-widget-subscribe-button" data-track-once>
      <span class="foreground">読者になる</span>
      <span class="background">読者になる</span>
    </span>
  </a>
  <div class="subscription-count-box js-subscription-count-box">
    <i></i>
    <u></u>
    <span class="subscription-count js-subscription-count">
    </span>
  </div>
</div>

    </div>

    <div id="container">
      <div id="container-inner">
        <header id="blog-title" data-brand="hatenablog">
  <div id="blog-title-inner" >
    <div id="blog-title-content">
      <h1 id="title"><a href="index.html">Rails Webook</a></h1>
      
        <h2 id="blog-description">自社のECを開発している会社で働いています。Rails情報やサービスを成長させる方法を書いていきます</h2>
      
    </div>
  </div>
</header>

        
          <div id="top-editarea">
            <!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
mixpanel.init("16db652100dca0a23c6a55a9205f0824");</script><!-- end Mixpanel -->
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- rails top bar 728 x 90 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-2736751992834286"
     data-ad-slot="6687328050"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

          </div>
        
        
        



<div id="content" class="hfeed"
  
  >
  <div id="content-inner">
    <div id="wrapper">
      <div id="main">
        <div id="main-inner">
          
            
            <!-- google_ad_section_start -->
            <!-- rakuten_ad_target_begin -->
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-1600 words-100 mode-hatena entry-odd" id="entry-12921228815729415150" data-keyword-campaign="" data-uuid="12921228815729415150">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date first">
        <a href="entries/2014/08/03.html" rel="nofollow">
          <time pubdate datetime="2014-08-03T07:00:00Z" title="2014-08-03T07:00:00Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">08</span><span class="hyphen">-</span><span class="date-day">03</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140803/1407049200.html" class="entry-title-link bookmark">Railsで独自ヘルパー(Helper)メソッドの作成方法</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%E5%88%9D%E7%B4%9A.html">Rails初級</a>
          
          <a href="archive/category/Rails%20View.html">Rails View</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p>Railsでの自前の独自ヘルパー(Helper)メソッドの作成方法について説明します。</p><p>Railsが既に多くのヘルパーメソッドを用意しているため、 <a href="http://www.google.co.jp/" target="_blank">Google検索</a> や <a href="http://api.rubyonrails.org/" target="_blank">Rails API 公式ページ</a>で探して、それでもなかったら実装して下さい。<br />
<br />
</p>

<div class="section">
    <h3>動作確認</h3>
    
<ul>
<li>Rails 4.1</li>
</ul>
</div>
<div class="section">
    <h3>目次</h3>
    
<ol>
<li>独自ヘルパーメソッドの実装</li>
<li>独自ヘルパーメソッドの使用</li>
<li>一歩上のRailsのヘルパーについての情報</li>
</ol>
</div>
<div class="section">
    <h3>独自ヘルパーメソッドの実装</h3>
    <p>ヘルパーモジュールは、<code>app/helpers</code>配下にあります。<br />
使い分けとして、</p>

<ul>
<li><code>application_helper.rb</code>は、アプリケーション全体にわたって使うヘルパーメソッドを定義</li>
<li><code>xxxxx_helper.rb</code>は、その"xxxxx"だけで使うヘルパーメソッドを定義</li>
</ul><p>という使い分けにすると、ヘルパーメソッドの管理が楽になります。</p><p>今回は、「条件が true の場合に、<code>divタグ</code>を表示するヘルパーメソッド」を作ります。<br />
アプリケーション全体で使うと思うため、<code>application_helper.rb</code>に追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/helpers/application_helper.rb</span>
<span class="synPreProc">module</span> <span class="synType">ApplicationHelper</span>

  <span class="synSpecial">//</span> 条件が <span class="synConstant">true</span> の場合のみ、divタグを表示する
  <span class="synPreProc">def</span> <span class="synIdentifier">div_tag_if</span>(condition, content_or_options_with_block = <span class="synConstant">nil</span>, options = <span class="synConstant">nil</span>, escape = <span class="synConstant">true</span>, &amp;block)
    <span class="synComment"># condition が trueの場合だけ、content_tagメソッドでdivタグを作成する</span>
    <span class="synComment"># falseの場合は、何も作成しない</span>
    <span class="synStatement">if</span> condition
      content_tag(<span class="synSpecial">&quot;</span><span class="synConstant">div</span><span class="synSpecial">&quot;</span>, content_or_options_with_block, options, escape, &amp;block)
    <span class="synStatement">end</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
    <h3>独自ヘルパーメソッドの使用</h3>
    <p>ヘルパーモジュールは、 Railsに自動で読み込まれるため、View内ですぐに使うことができます。<br />
では、View内で使ってみましょう。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/products/index.html.erb</span>

&lt;!--  商品が空の場合、divタグで囲まれた<span class="synSpecial">&quot;</span><span class="synConstant">商品がありません。</span><span class="synSpecial">&quot;</span>を表示します。 --&gt;
&lt;%= div_tag_if(<span class="synIdentifier">@products</span>.empty?, <span class="synSpecial">&quot;</span><span class="synConstant">商品がありません。</span><span class="synSpecial">&quot;</span>) %&gt;
</pre><p>一応表示された画面です。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140802/20140802185658.png" alt="f:id:nipe880324:20140802185658p:plain:w240" title="f:id:nipe880324:20140802185658p:plain:w240" class="hatena-fotolife" style="width:240px" itemprop="image"></span></p><br />
<br />
<p></p>

</div>
<div class="section">
    <h3>一歩上のRailsのヘルパーについての情報</h3>
    <p>RailsはすべてのHelperをロードします。つまり、どのビューファイルからでも、すべてのヘルパーのメソッドを使うことができます。<br />
そのため、<b>自前のヘルパーメソッドの命名が重複しないようする</b>必要があります。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/helpers/application_helper.rb</span>
<span class="synPreProc">module</span> <span class="synType">ApplicationHelper</span>
  <span class="synComment"># メソッド名が重複している</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">some_method</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

<span class="synComment"># app/helpers/somes_helper.rb</span>
<span class="synPreProc">module</span> <span class="synType">SomesHelper</span>
  <span class="synComment"># メソッド名が重複している</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">some_method</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre><p>Helperが増える場合は、<a href="https://github.com/drapergem/draper" target="_blank">Draper</code>などのデコレーターを使うことを検討した良い場合があります。</p><p>以上です。</p>

</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140803/1407049200.html"><time data-relative datetime="2014-08-03T07:00:00Z" title="2014-08-03T07:00:00Z" pubdate class="updated">2014-08-03 16:00</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140803/1407049200" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140803%2F1407049200" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140803/1407049200" data-count="vertical" data-text="Railsで独自ヘルパー(Helper)メソッドの作成方法 - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140803/1407049200" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
            
            <div class="google-afc-image test-google-rectangle-ads ">
              
              
                <script>
  var hatenadfp = hatenadfp || {};
  hatenadfp.adUnits = hatenadfp.adUnits || [];
  hatenadfp.adUnits.push(
    
      { unitName: 'blog_user', size: [[300, 250], [336, 280]], divId: 'google_afc_user_container_0', allowContentMatch: true }
    
  );
  hatenadfp.isNGContent = false;
  
</script>

                <div id="google_afc_user_container_0" class="google_afc_blocklink2_5 google_afc_boder"></div>
                
                  <a href="http://blog.hatena.ne.jp/guide/pro" class="open-pro-modal" data-guide-pro-modal-ad-url="http://hatenablog.com/guide/pro/modal/ad">広告を非表示にする</a>
                
                
              
            </div>
          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-2000 words-400 mode-hatena entry-even" id="entry-12921228815729413033" data-keyword-campaign="" data-uuid="12921228815729413033">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date first">
        <a href="entries/2014/08/02.html" rel="nofollow">
          <time pubdate datetime="2014-08-02T08:56:33Z" title="2014-08-02T08:56:33Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">08</span><span class="hyphen">-</span><span class="date-day">02</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140802/1406969793.html" class="entry-title-link bookmark">Railsのテキスト、数値、日付/日時関連のフォーマットヘルパー</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%20View.html">Rails View</a>
          
          <a href="archive/category/%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9.html">リファレンス</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p>RailsのViewでよく使う<b>日付、数値、テキストのフォーマットヘルパー</b>のリファレンスです。<br />
フォーマットヘルパーは、日付/日時、数値、テキストの「表示形式を指定」できます。</p>

<div class="section">
    <h3>動作確認</h3>
    
<ul>
<li>Rails 4.1</li>
</ul>
</div>
<div class="section">
    <h3>テキスト関連</h3>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># デバッグ情報を表示する</span>
&lt;%= debug(params) %&gt; <span class="synComment">#=&gt; リクエストパラメータの中身を表示</span>
&lt;%= debug(cookies) %&gt; <span class="synComment">#=&gt; クッキーの中身を表示</span>

<span class="synComment"># 改行やスペースをそのままの形で表示する。テキストエリアの表示などで使う</span>
&lt;%= simple_format(<span class="synSpecial">&quot;</span><span class="synConstant">&lt;p&gt;ABC&lt;br&gt;ZYX&lt;/p&gt;</span><span class="synSpecial">&quot;</span>) %&gt;
<span class="synComment">#=&gt; &lt;p&gt;ABC&lt;br&gt;ZYX&lt;/p&gt;</span>

<span class="synComment"># 文字列内の「指定文字」にタグを作成する（デフォルト：mark）</span>
&lt;%= highlight( <span class="synSpecial">&quot;</span><span class="synConstant">これはテスト用の文字列です。</span><span class="synSpecial">&quot;</span>, <span class="synSpecial">&quot;</span><span class="synConstant">テスト</span><span class="synSpecial">&quot;</span>) %&gt;
<span class="synComment">#=&gt; これは&lt;mark&gt;テスト&lt;/mark&gt;用の文字列です。</span>
&lt;%= highlight(<span class="synSpecial">'</span><span class="synConstant">これはテスト用の文字列です。</span><span class="synSpecial">'</span>, [<span class="synSpecial">'</span><span class="synConstant">テスト</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">文字列</span><span class="synSpecial">'</span>], <span class="synConstant">highlighter</span>: <span class="synSpecial">'</span><span class="synConstant">&lt;em&gt;\1&lt;/em&gt;</span><span class="synSpecial">'</span>) %&gt;
<span class="synComment">#=&gt; これは&lt;em&gt;テスト&lt;/em&gt;用の&lt;em&gt;文字列&lt;/em&gt;です。</span>

<span class="synComment"># lengthで指定した文字数以上ある場合は、&quot;...&quot;で文字列を省略して表示する。</span>
<span class="synComment">#（lengthは、...の数も含む）</span>
&lt;%= truncate(<span class="synSpecial">'</span><span class="synConstant">これはテスト用の文字列です。</span><span class="synSpecial">'</span>, <span class="synConstant">length</span>: <span class="synConstant">8</span>) %&gt;
<span class="synComment">#=&gt; これはテス...</span>
&lt;%= truncate(<span class="synSpecial">&quot;</span><span class="synConstant">これはテスト用文字列です。</span><span class="synSpecial">&quot;</span>, <span class="synConstant">length</span>: <span class="synConstant">8</span>) { link_to <span class="synSpecial">&quot;</span><span class="synConstant">続きを読む</span><span class="synSpecial">&quot;</span>, <span class="synSpecial">&quot;</span><span class="synConstant">#</span><span class="synSpecial">&quot;</span> } %&gt;
<span class="synComment">#=&gt; これはテス...&lt;a href=&quot;#&quot;&gt;続きを読む&lt;/a&gt;</span>

<span class="synComment"># 文字列内の「指定文字」からradius文だけ表示する</span>
&lt;%= excerpt( <span class="synSpecial">&quot;</span><span class="synConstant">これはテスト用の文字列です。</span><span class="synSpecial">&quot;</span>, <span class="synSpecial">&quot;</span><span class="synConstant">テスト</span><span class="synSpecial">&quot;</span>, <span class="synConstant">radius</span>: <span class="synConstant">2</span>) %&gt;
<span class="synComment">#=&gt;...れはテスト用の...</span>

<span class="synComment"># 日本語では関係ないですが、名詞の単数/複数を識別して表示する</span>
&lt;%= pluralize(<span class="synConstant">1</span>, <span class="synSpecial">'</span><span class="synConstant">person</span><span class="synSpecial">'</span>) %&gt; <span class="synComment"># =&gt; 1 person</span>
&lt;%= pluralize(<span class="synConstant">2</span>, <span class="synSpecial">'</span><span class="synConstant">person</span><span class="synSpecial">'</span>) %&gt; <span class="synComment"># =&gt; 2 people</span>
<span class="synComment"># 日本語でちょっと実験してみましたが変な風に表示されてしまいます。</span>
<span class="synComment"># 多分、単数系複数形の辞書があり、そこでマッチしなかったら&quot;s&quot;をつけるとかのロジックなんだと思います。</span>
&lt;%= pluralize(<span class="synConstant">1</span>, <span class="synSpecial">'</span><span class="synConstant">人</span><span class="synSpecial">'</span>) %&gt; <span class="synComment">#=&gt; 1 人</span>
&lt;%= pluralize(<span class="synConstant">2</span>, <span class="synSpecial">'</span><span class="synConstant">人</span><span class="synSpecial">'</span>) %&gt; <span class="synComment">#=&gt; 2 人s</span>
</pre>
</div>
<div class="section">
    <h3>数値関連</h3>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 通貨形式で表示する</span>
&lt;%= number_to_currency( <span class="synConstant">1234.56</span> ) %&gt; <span class="synComment">#=&gt; $1,234.56 （ロケールは en）</span>
&lt;%= number_to_currency( <span class="synConstant">1234.56</span>, <span class="synConstant">unit</span>: <span class="synSpecial">&quot;</span><span class="synConstant">¥</span><span class="synSpecial">&quot;</span>, <span class="synConstant">precision</span>: <span class="synConstant">0</span> ) %&gt; <span class="synComment">#=&gt; ¥1,235</span>

<span class="synComment"># バイトで表示する</span>
&lt;%= number_to_human_size( <span class="synConstant">1200</span> ) %&gt; <span class="synComment">#=&gt; 1.17 KB</span>

<span class="synComment"># パーセントで表示する</span>
&lt;%= number_to_percentage( <span class="synConstant">66.666666</span>, <span class="synConstant">precision</span>: <span class="synConstant">1</span> ) %&gt; <span class="synComment">#=&gt; 66.7%</span>

<span class="synComment"># 3桁毎に区切り文字(デフォルトは ,)を追加して表示する</span>
&lt;%= number_with_delimiter( <span class="synConstant">1234567890</span> ) %&gt; <span class="synComment">#=&gt; 1,234,567,890</span>
&lt;%= number_with_delimiter( <span class="synConstant">1234567890</span>, <span class="synConstant">delimiter</span>: <span class="synSpecial">&quot;</span><span class="synConstant">_</span><span class="synSpecial">&quot;</span> ) %&gt; <span class="synComment">#=&gt; 1_234_567_890</span>

<span class="synComment"># 表示桁数を指定して表示する（四捨五入される）</span>
&lt;%= number_with_precision( <span class="synConstant">12.3456</span>, <span class="synConstant">precision</span>: <span class="synConstant">2</span> ) %&gt; <span class="synComment">#=&gt; 12.35</span>
</pre>
</div>
<div class="section">
    <h3>日付/日時関連</h3>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 現在日時から引数で指定した日時までのおよその日付を表示</span>
&lt;%= time_ago_in_words(<span class="synConstant">3</span>.minutes.from_now)  %&gt;   <span class="synComment"># =&gt; 3 minutes</span>
&lt;%= time_ago_in_words(<span class="synConstant">3</span>.minutes.ago)  %&gt;            <span class="synComment"># =&gt; 3 minutes</span>
</pre>
</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140802/1406969793.html"><time data-relative datetime="2014-08-02T08:56:33Z" title="2014-08-02T08:56:33Z" pubdate class="updated">2014-08-02 17:56</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140802/1406969793" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140802%2F1406969793" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140802/1406969793" data-count="vertical" data-text="Railsのテキスト、数値、日付/日時関連のフォーマットヘルパー - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140802/1406969793" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
          <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4438296558807254"
     data-ad-slot="4370884664"
     data-ad-format="horizontal"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
                <article class="entry hentry js-entry-article date-last autopagerize_page_element chars-3200 words-400 mode-hatena entry-odd" id="entry-12921228815729401318" data-keyword-campaign="" data-uuid="12921228815729401318">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date last">
        <a href="entries/2014/08/02.html" rel="nofollow">
          <time pubdate datetime="2014-08-02T03:04:55Z" title="2014-08-02T03:04:55Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">08</span><span class="hyphen">-</span><span class="date-day">02</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140802/1406948695.html" class="entry-title-link bookmark">rails generateコマンドのよく使うコマンドまとめ</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%E5%88%9D%E7%B4%9A.html">Rails初級</a>
          
          <a href="archive/category/%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9.html">リファレンス</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p><code>$ rails generate</code>コマンドの使い方まとめました。<br />
<br />
</p>

<div class="section">
    <h3>動作確認</h3>
    
<ul>
<li>Rails 4.1</li>
</ul>
</div>
<div class="section">
    <h3>目次</h3>
    
<ol>
<li>rails generate コマンドで生成されるファイル一覧表</li>
<li>rails generate scaffold コマンド（index〜destroyまで全て作成）</li>
<li>rails generate controller コマンド（コントローラーとビューを作成）</li>
<li>rails generate model コマンド（モデルとマイグレーションファイルを作成）</li>
<li>rails generate migration コマンド（マイグレーションファイルを作成）</li>
<li>rails generate で利用可能なフィールドタイプ一覧</li>
<li>rails destroy コマンド（rails generateで生成したファイルを削除）</li>
<li>ヘルプの表示方法</li>
</ol>
</div>
<div class="section">
    <h3><code>$ rails generate</code>コマンドで生成されるファイル一覧表</h3>
    <p><table class="table table-striped">
  <thead><tr><th>コマンド名</th><th>概要</th><th>コントローラー(テスト含む)</th><th>ビュー</th><th>ヘルパー(テスト含む)</th><th>モデル(テスト含む)</th><th>マイグレーション</th></tr></thead>
  <tbody>
    <tr><td>scaffold</td><td>全て作成（基本的なCRUDの画面や機能が欲しい場合）</td><td>○</td><td>○</td><td>○</td><td>○</td><td>○</td></tr>
    <tr><td>controller</td><td>コントローラーとビューを作成</td><td>○</td><td>○</td><td>○</td><td>×</td><td>×</td></tr>
    <tr><td>model</td><td>モデルとマイグレーションを作成（新規モデル作成時など）</td><td>×</td><td>×</td><td>×</td><td>○</td><td>○</td></tr>
    <tr><td>migrate</td><td>マイグレーション作成（カラム追加時など）</td><td>×</td><td>×</td><td>×</td><td>×</td><td>○</td></tr>
  </tbody>
</table></p><br />
<p></p>

</div>
<div class="section">
    <h3><code>$ rails generate scaffold</code>コマンド</h3>
    <p><code>$ rails generate[ or g] scaffold</code>でコントローラー、ビュー、モデル、マイグレーションファイルの全てを作成することができます。<br />
<code>$ rails g controller</code>のように、<code>index new</code>などのアクションを指定して作成することはできません。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 使い方</span>
$ rails generate scaffold <span class="synType">NAME</span> [field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>] field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>]] [options]

<span class="synComment"># サンプル</span>
$ rails generate scaffold post title body<span class="synConstant">:text</span> published<span class="synConstant">:boolean</span>
$ rails generate scaffold purchase amount<span class="synConstant">:decimal</span> tracking_id<span class="synConstant">:integer:uniq</span>

使えるフィールドタイプについては、下記の「rails generate で利用可能なフィールドタイプ一覧」を参照して下さい。
よく使うオプションについては、下記の「rails generate のよく使うオプション一覧」を参照して下さい。
</pre>
</div>
<div class="section">
    <h3><code>$ rails generate controller</code>コマンド</h3>
    <p><code>$ rails generate[ or g] controller</code>でコントローラーとビューを作成することができます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 使い方</span>
$ rails generate controller <span class="synType">NAME</span> [action action] [options]

<span class="synComment"># サンプル</span>
$ rails g controller <span class="synType">CreditCards</span> open debit credit close
<span class="synComment"># =&gt;</span>
<span class="synComment">#  'credit_cards/open'などの routeを追加</span>
<span class="synComment">#  'app/controllers/credit_cards_controller.rb'を追加（コントローラーのテストも追加）</span>
<span class="synComment">#  'app/views/credit_cards/open.html.erb'などの viewを追加</span>
<span class="synComment"># 'app/helpers/credit_cards_helper.rb'を追加（ヘルパーのテストも追加）</span>
<span class="synComment"># 'credit_cards.js.coffee'と'credit_cards.css.scss'のアセットを追加</span>

よく使うオプションについては、下記の「rails generate のよく使うオプション一覧」を参照して下さい。
</pre>
</div>
<div class="section">
    <h3><code>$ rails generate model</code>コマンド</h3>
    <p><code>$ rails generate[ or g] model</code>でモデルとマイグレーションファイルを作成することができます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 使い方</span>
$ rails generate model <span class="synType">NAME</span> [field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>] field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>]] [options]

<span class="synComment"># サンプル</span>
$ rails g model post title<span class="synConstant">:string</span> body<span class="synConstant">:text</span> published<span class="synConstant">:boolean</span>
<span class="synComment"># =&gt; </span>
<span class="synComment"># String型のtitle、Text型のbody、Boolean型のpublishedカラムが存在するマイグレーションファイルと</span>
<span class="synComment"># Postモデルが作成される</span>

使えるフィールドタイプについては、下記の「rails generate で利用可能なフィールドタイプ一覧」を参照して下さい。
よく使うオプションについては、下記の「rails generate のよく使うオプション一覧」を参照して下さい。
</pre>
</div>
<div class="section">
    <h3><code>$ rails generate migration</code>コマンド</h3>
    <p><code>$ rails generate[ or g] migration</code>でマイグレーションファイルを作成することができます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 使い方：</span>
$ rails generate migration <span class="synType">NAME</span> [field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>] field[<span class="synConstant">:type</span>][<span class="synConstant">:index</span>]] [options]

<span class="synComment"># サンプル：</span>
$ rails g migration add_image_url_to_post image_url<span class="synConstant">:string</span>
<span class="synComment"># =&gt; postsテーブルにString型のimage_urlカラムを追加するマイグレーションファイルを作成</span>

$ rails g migration add_order_id_to_line_item order_id<span class="synConstant">:integer</span>
<span class="synComment"># =&gt; line_itmesテーブルにInteger型のorder_idカラムを追加するマイグレーションファイルを作成</span>

使えるフィールドタイプについては、下記の「rails generate で利用可能なフィールドタイプ一覧」を参照して下さい。
よく使うオプションについては、下記の「rails generate のよく使うオプション一覧」を参照して下さい。
</pre>
</div>
<div class="section">
    <h3><code>$ rails generate</code>で利用可能なフィールドタイプ一覧</h3>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink>利用可能なフィールドタイプ：
integer
primary_key
decimal
float
boolean
binary
string
text
date
time
datetime
timestamp
references
</pre>
</div>
<div class="section">
    <h3>ヘルプの表示方法</h3>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g -h <span class="synComment"># rails g のヘルプ表示</span>
$ rails g controller -h <span class="synComment"># rails g controller のヘルプ表示</span>
</pre>
</div>
<div class="section">
    <h3>参考サイト</h3>
    
<ul>
<li><a href="http://d.hatena.ne.jp/maeharin/20130212/rails_generate" target="_blank">いつも忘れる「Railsのgenerateコマンド」の備忘録</a>　とても分かりやすく実用的にまとめられています。</li>
</ul>
</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140802/1406948695.html"><time data-relative datetime="2014-08-02T03:04:55Z" title="2014-08-02T03:04:55Z" pubdate class="updated">2014-08-02 12:04</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140802/1406948695" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140802%2F1406948695" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140802/1406948695" data-count="vertical" data-text="rails generateコマンドのよく使うコマンドまとめ - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140802/1406948695" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
            
            <div class="google-afc-image test-google-rectangle-ads ">
              
              
                <script>
  var hatenadfp = hatenadfp || {};
  hatenadfp.adUnits = hatenadfp.adUnits || [];
  hatenadfp.adUnits.push(
    
      { unitName: 'blog_user_2nd', size: [[300, 250], [336, 280]], divId: 'google_afc_user_container_1', allowContentMatch: true }
    
  );
  hatenadfp.isNGContent = false;
  
</script>

                <div id="google_afc_user_container_1" class="google_afc_blocklink2_5 google_afc_boder"></div>
                
                  <a href="http://blog.hatena.ne.jp/guide/pro" class="open-pro-modal" data-guide-pro-modal-ad-url="http://hatenablog.com/guide/pro/modal/ad">広告を非表示にする</a>
                
                
              
            </div>
          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-7600 words-600 mode-hatena entry-even" id="entry-12921228815729285016" data-keyword-campaign="" data-uuid="12921228815729285016">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date first">
        <a href="entries/2014/08/01.html" rel="nofollow">
          <time pubdate datetime="2014-08-01T05:00:00Z" title="2014-08-01T05:00:00Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">08</span><span class="hyphen">-</span><span class="date-day">01</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140801/1406907000.html" class="entry-title-link bookmark">Railsのログイン認証gemのDeviseのインストール方法</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%20gem.html">Rails gem</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p><a href="https://camo.githubusercontent.com/b1c21cc10f2f94857dea5135fe55f2e4d451e028/68747470733a2f2f7261772e6769746875622e636f6d2f706c617461666f726d617465632f6465766973652f6d61737465722f6465766973652e706e67" class="http-image" target="_blank"><img src="https://camo.githubusercontent.com/b1c21cc10f2f94857dea5135fe55f2e4d451e028/68747470733a2f2f7261772e6769746875622e636f6d2f706c617461666f726d617465632f6465766973652f6d61737465722f6465766973652e706e67" class="http-image" alt="https://camo.githubusercontent.com/b1c21cc10f2f94857dea5135fe55f2e4d451e028/68747470733a2f2f7261772e6769746875622e636f6d2f706c617461666f726d617465632f6465766973652f6d61737465722f6465766973652e706e67" width="320"></a></p><p></p>

<div class="section">
    <h3>概要</h3>
    <p>DeviseはRailsで最も人気なログイン認証機能を提供しているgemです。<br />
RailsにDeviseのインストール方法を説明します。<br />
また、初期設定、ログイン用のユーザーモデルを作成といったDeviseの導入部分を説明します。</p>

<ul>
<li>次回は、「<a href="entry/20140804/1407168000.html">Deviseのカスタマイズ方法</a>」について説明します。</li>
<li>次々回は、「<a href="entry/20140805/1407200400.html">DeviseとOmniAuth-Twitter連携（Twitterでログインする）</a>」です。</li>
</ul>
</div>
<div class="section">
    <h3>動作確認</h3>
    <p>・Rails 4.1.4<br />
・Devise 3.2.4<br />
<br />
<br />
</p>

</div>
<div class="section">
    <h3>目次</h3>
    
<ol>
<li><a href="index-page=1407168000.html#devise-install-setting">deviseのインストールと初期設定</a></li>
<li><a href="index-page=1407168000.html#devise-install-create-user">deviseのUserモデルの作成</a></li>
<li><a href="index-page=1407168000.html#devise-install-ten-modules">(おまけ) deviseの10個のモジュール説明</a></li>
<li><a href="index-page=1407168000.html#devise-install-helpers">(おまけ) よく使うdeviseのHelperメソッド</a></li>
</ol><p></p><p><h3 id="devise-install-setting">1. deviseのインストールと初期設定</h3>まず、Railsプロジェクトの作成をします。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails new devise
$ cd devise
</pre><p>次に、<code>devise</code>をGemfileに追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>
gem <span class="synSpecial">'</span><span class="synConstant">devise</span><span class="synSpecial">'</span>
</pre><p>そして、gemをインストールします。</p>
<pre class="code" data-lang="" data-unlink>$ bundle install</pre><p>では、<code>devise</code>に関連したファイルをRailsプロジェクトに追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g devise<span class="synConstant">:install</span>
      create  config/initializers/devise.rb
      create  config/locales/devise.en.yml
===============================================================================

<span class="synType">Some</span> setup you must <span class="synStatement">do</span> manually <span class="synStatement">if</span> you haven<span class="synSpecial">'</span><span class="synConstant">t yet:</span>

<span class="synConstant">  1. Ensure you have defined default url options in your environments files. Here</span>
<span class="synConstant">     is an example of default_url_options appropriate for a development environment</span>
<span class="synConstant">   .......</span>
<span class="synConstant">   ......</span>
</pre><p><br />
５つの初期設定の方法が記載されたメッセージが表示されます。<br />
これから、１つずつ実施していきましょう。</p>

<div class="section">
    <h5>まず１番目。deviseのメール送信時のホスト名を指定します。</h5>
    <p>メール送信のために、<code>config/environments/development.rb</code>に<code>  config.action_mailer.default_url_options = { host: 'localhost:3000' }</code>を追加してください。<br />
<code>productionモード</code>のときは、<code>host:</code>に実際のサーバーの値を設定して下さいと記載されています。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># config/environments/development.rb</span>
<span class="synType">Rails</span>.application.configure <span class="synStatement">do</span>
  ...
  <span class="synComment"># deviseの設定</span>
  config.action_mailer.default_url_options = { <span class="synConstant">host</span>: <span class="synSpecial">'</span><span class="synConstant">localhost:3000</span><span class="synSpecial">'</span> }
<span class="synStatement">end</span>
</pre>
</div>
<div class="section">
    <h5>次に２番目。root_urlを指定します。</h5>
    <p>deviseはログアウト時などのリダイレクト先として<code>root_url</code>を使うため、これが設定されていないとエラーになってしまうため、設定しなければいけません。<br />
既に設定されている場合は必要ありません。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># config/routes.rb</span>
  ...
  root <span class="synConstant">to</span>: <span class="synSpecial">&quot;</span><span class="synConstant">home#index</span><span class="synSpecial">&quot;</span>
  ...
</pre><p><code>root_url</code>にルートを設定しましたが、実際のControllerやViewがないため作成しておきましょう。<br />
<code>home#index</code>を作成しましたのでルートにアクセスしても大丈夫です。<br />
ここで、<code>home#show</code>も作成していますが、次の記事の「Deviseのカスタマイズ」の「アクセス制限」で使うため作っておきました。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g controller <span class="synType">Home</span> index show
      create  app/controllers/home_controller.rb
       route  get <span class="synSpecial">'</span><span class="synConstant">home/show</span><span class="synSpecial">'</span>
       route  get <span class="synSpecial">'</span><span class="synConstant">home/index</span><span class="synSpecial">'</span>
      invoke  erb
      create    app/views/home
      create    app/views/home/index.html.erb
      create    app/views/home/show.html.erb
      invoke  test_unit
      create    test/controllers/home_controller_test.rb
      invoke  helper
      create    app/helpers/home_helper.rb
      invoke    test_unit
      create      test/helpers/home_helper_test.rb
      invoke  assets
      invoke    coffee
      create      app/assets/javascripts/home.js.coffee
      invoke    scss
      create      app/assets/stylesheets/home.css.scss
</pre>
</div>
<div class="section">
    <h5>次に３番目。エラーメッセージの表示領域を作成します。</h5>
    <p>deviseはログインやログアウトなどのときに、<code>flash</code>にサクセスやエラーメッセージを追加するので、その表示領域を追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/layouts/application.html.erb</span>
....
&lt;body&gt;
&lt;p <span class="synPreProc">class</span>=&quot;notice&quot;&gt;&lt;%= notice %&gt;&lt;/p&gt;
&lt;p <span class="synPreProc">class</span>=&quot;alert&quot;&gt;&lt;%= alert %&gt;&lt;/p&gt;

&lt;%= <span class="synStatement">yield</span> %&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
<div class="section">
    <h5>4は、Rails3.2だけ必要なのでスキップします。</h5>
    
</div>
<div class="section">
    <h5>5は、Viewをカスタマイズしたいときのため必要であり、今はインストールのみのためスキップします。</h5>
    <p>次の記事の「Deviseのカスタマイズ」でDeviseのViewのカスタマイズを行います。</p>

</div>
<div class="section">
    <h5>これで、deviseの初期設定は終わりました。</h5>
    <p></p><p><h3 id="devise-install-create-user">2. deviseのUserモデルの作成</h3>それでは、deviseのモデルを作成しましょう。今回は、<code>User</code>という名前でモデルを作成します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g devise <span class="synType">User</span>
      invoke  active_record
      create    db/migrate/20140730042329_devise_create_users.rb
      create    app/models/user.rb
      invoke    test_unit
      create      test/models/user_test.rb
      create      test/fixtures/users.yml
      insert    app/models/user.rb
       route  devise_for <span class="synConstant">:users</span>
</pre><p>マイグレートする前に今作成された、<code>user.rb</code>と<code>yyyymmddhhmmss_devise_create_users.rb</code>の中身を見ましょう。<br />
<span style="color: #ff2600"><i>deviseの重要なポイントとして、ModelファイルとMigrationファイルで10個のモジュールを有効/無効にできるからです。</i><br />
</span></p><p>まずは、<code>user.rb</code>を見ましょう。<br />
デフォルトでは、いくつかのモジュールはコメントアウトされています。<br />
これをコメントイン、コメントアウトすることにより、機能を有効/無効にすることができます。<br />
それぞれのモジュールの説明は本ページ下部の「deviseの10個のモジュール説明」に記載してあります。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/models/user.rb</span>
<span class="synPreProc">class</span> <span class="synType">User</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  <span class="synComment"># Include default devise modules. Others available are:</span>
  <span class="synComment"># :confirmable, :lockable, :timeoutable and :omniauthable</span>
  devise <span class="synConstant">:database_authenticatable</span>, <span class="synConstant">:registerable</span>,
         <span class="synConstant">:recoverable</span>, <span class="synConstant">:rememberable</span>, <span class="synConstant">:trackable</span>, <span class="synConstant">:validatable</span>
<span class="synPreProc">end</span>
</pre><p>今度は、<code>yyyymmddhhmmss_devise_create_users.rb</code>を見ましょう。<br />
「Database autohenticatbale」、「Recoverable」など見出しがついていることがわかると思います。先ほどの、Modelファイルでコメントインされているモジュールと対応させる必要があります。<br />
例えば、user.rbで<code>:confirmable</code>をコメントインした場合、このマイグレーションファイルでも<code>Confirmable</code>の下の4行をコメントインしなければいけません。ちなみに、一番したの、<code>confirmation_token</code>のadd_indexメソッドもコメントインすることも忘れないで下さい。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># db/migrate/yyyymmddhhmmss_devise_create_users.rb</span>
<span class="synPreProc">class</span> <span class="synType">DeviseCreateUsers</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Migration</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">change</span>
    create_table(<span class="synConstant">:users</span>) <span class="synStatement">do</span> |<span class="synIdentifier">t</span>|
      <span class="synComment">## Database authenticatable</span>
      t.string <span class="synConstant">:email</span>,              <span class="synConstant">null</span>: <span class="synConstant">false</span>, <span class="synConstant">default</span>: <span class="synSpecial">&quot;&quot;</span>
      t.string <span class="synConstant">:encrypted_password</span>, <span class="synConstant">null</span>: <span class="synConstant">false</span>, <span class="synConstant">default</span>: <span class="synSpecial">&quot;&quot;</span>

      <span class="synComment">## Recoverable</span>
      t.string   <span class="synConstant">:reset_password_token</span>
      t.datetime <span class="synConstant">:reset_password_sent_at</span>

      <span class="synComment">## Rememberable</span>
      t.datetime <span class="synConstant">:remember_created_at</span>

      <span class="synComment">## Trackable</span>
      t.integer  <span class="synConstant">:sign_in_count</span>, <span class="synConstant">default</span>: <span class="synConstant">0</span>, <span class="synConstant">null</span>: <span class="synConstant">false</span>
      t.datetime <span class="synConstant">:current_sign_in_at</span>
      t.datetime <span class="synConstant">:last_sign_in_at</span>
      t.string   <span class="synConstant">:current_sign_in_ip</span>
      t.string   <span class="synConstant">:last_sign_in_ip</span>

      <span class="synComment">## Confirmable</span>
      <span class="synComment"># t.string   :confirmation_token</span>
      <span class="synComment"># t.datetime :confirmed_at</span>
      <span class="synComment"># t.datetime :confirmation_sent_at</span>
      <span class="synComment"># t.string   :unconfirmed_email # Only if using reconfirmable</span>

      <span class="synComment">## Lockable</span>
      <span class="synComment"># t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts</span>
      <span class="synComment"># t.string   :unlock_token # Only if unlock strategy is :email or :both</span>
      <span class="synComment"># t.datetime :locked_at</span>


      t.timestamps
    <span class="synStatement">end</span>

    add_index <span class="synConstant">:users</span>, <span class="synConstant">:email</span>,                <span class="synConstant">unique</span>: <span class="synConstant">true</span>
    add_index <span class="synConstant">:users</span>, <span class="synConstant">:reset_password_token</span>, <span class="synConstant">unique</span>: <span class="synConstant">true</span>
    <span class="synComment"># add_index :users, :confirmation_token,   unique: true</span>
    <span class="synComment"># add_index :users, :unlock_token,         unique: true</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre><p><br />
とりあえず、今回は特に修正せず、マイグレートを実施します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rake db<span class="synConstant">:migrate</span>
</pre><p>最後に、全ての画面の上部に、<br />
・ログインしていない場合は、「サインイン」と「ログイン」のリンク<br />
・ログインしている場合は、「プロフィール変更」と「ログアウト」のリンク<br />
を表示させるようにします。</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/layouts/application.html.erb
...
<span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;</span>header<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>nav<span class="synIdentifier">&gt;</span>
    <span class="synComment">&lt;!-- user_signed_in? はユーザがログインしているか調べるdeviseのHelperメソッド --&gt;</span>
    <span class="synIdentifier">&lt;% if user_signed_in? %&gt;</span> 
      <span class="synComment">&lt;!-- current_user は現在ログインしているUserオブジェクトを返すdeviseのHelperメソッド --&gt;</span>
      <span class="synComment">&lt;!-- *_path はUserモデルを作成したときに、</span>
<span class="synComment">        deviseにより自動で作成されてますので、rake routesで確認できます --&gt;</span>
      Logged in as <span class="synIdentifier">&lt;</span><span class="synStatement">strong</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> current_user.email</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">strong</span><span class="synIdentifier">&gt;</span>.
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">'プロフィール変更'</span><span class="synIdentifier">, edit_user_registration_path %&gt;</span> |
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;ログアウト&quot;</span><span class="synIdentifier">, destroy_user_session_path, </span><span class="synType">method</span><span class="synIdentifier">: :delete %&gt;</span>
    <span class="synIdentifier">&lt;% else %&gt;</span>
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;サインイン&quot;</span><span class="synIdentifier">, new_user_registration_path %&gt;</span> |
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;ログイン&quot;</span><span class="synIdentifier">, new_user_session_path %&gt;</span>
    <span class="synIdentifier">&lt;% end %&gt;</span>
  <span class="synIdentifier">&lt;/</span>nav<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>header<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;notice&quot;</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> notice</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;alert&quot;</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> alert</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;%=</span><span class="synConstant"> yield</span><span class="synIdentifier"> %&gt;</span>

<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">html</span><span class="synIdentifier">&gt;</span>
</pre><p><br />
では、サーバを起動し、画面を確認しましょう。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails s
</pre><p>まず、ホーム画面（<a href="http://localhost:3000/">http://localhost:3000/</a>）です。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140731/20140731220850.png" alt="f:id:nipe880324:20140731220850p:plain:w480" title="f:id:nipe880324:20140731220850p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><p>次に、サインアップ画面（ユーザ登録）（<a href="http://localhost:3000/users/sign_up">http://localhost:3000/users/sign_up</a>）に遷移します。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140731/20140731220852.png" alt="f:id:nipe880324:20140731220852p:plain:w480" title="f:id:nipe880324:20140731220852p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><p>「Sign up」ボタンを押しました。すると、裏でユーザ登録とログイン処理が行われ、上記の表示が変わり、今登録したメールアドレスが表示されています。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140731/20140731220853.png" alt="f:id:nipe880324:20140731220853p:plain:w480" title="f:id:nipe880324:20140731220853p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><p>最後に、「ログアウト」をクリックしログアウトしています。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140731/20140731220849.png" alt="f:id:nipe880324:20140731220849p:plain:w480" title="f:id:nipe880324:20140731220849p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<p>deviseの導入はおしまいです。<br />
次は、<a href="entry/20140804/1407168000.html">Deviseのカスタマイズ方法</a>を見てくください。</p><br />
<br />
<br />
<p><h3 id="devise-install-ten-modules">(おまけ) deviseの10個のモジュール説明</h3><a href="https://github.com/plataformatec/devise#getting-started" target="_blank">deviseの公式ドキュメント（英語）</a>に詳細は記載されています。</p><p>以下に、10のモジュールの日本語訳を記載しておきます(2014/8/1現在)</p>

<ul>
<li>Database Authenticatable</li>
</ul><p>サインイン中のユーザの認証を検証するために、パスワードの暗号とDBへの保存をします。<br />
特殊な使い方をしない限り、基本的には必須。</p>

<ul>
<li>Omniauthable</li>
</ul><p><a href="https://github.com/intridea/omniauth" target="_blank">Omniauthサポート</a>を追加します。<br />
TwitterアカウントやFacebookアカウントなどでユーザ登録したい場合は、追加して下さい。</p>

<ul>
<li>Confirmable</li>
</ul><p>アカウントの有効化させるためのメールを送信し、そして、サインイン時（ユーザ登録）にアカウントが有効化されているか検証する。<br />
サインインプロセスを、ユーザに確認メールを送信して、そのメール内のリンクをクリックしないとアカウントが有効化されない（ログインできない）というプロセスにできます。<br />
これが無い場合は、サインインを行ったら、すぐにログインができます。</p>

<ul>
<li>Recoverable</li>
</ul><p>パスワードを忘れたときのための、パスワードのリセットができるようになります。</p>

<ul>
<li>Registerable</li>
</ul><p>サインアップ処理によってユーザアカウントを行うことができます。アカウントの編集や削除も含まれています。<br />
特殊な使い方をしないかぎり、基本的には必須だと思います。</p>

<ul>
<li>Rememberable</li>
</ul><p>クッキーに保存されたトークンの生成と削除を行うことができます。<br />
あまり良くわかっていませんが、デフォルトでもコメントインされているので多分必須だと思います。</p>

<ul>
<li>Trackable</li>
</ul><p>サインインの回数やサインイン時刻、IPアドレスをDBのカラムに保存します。</p>

<ul>
<li>Timeoutable</li>
</ul><p>指定した一定時間内に操作がなければセッション情報を削除できます。</p>

<ul>
<li>Validatable</li>
</ul><p>メールアドレスとパスワードの基本的な検証をします。自分自身でValidationも追加できます。</p>

<ul>
<li>Lockable</li>
</ul><p>指定した回数サインインに失敗した場合にアカウントをロックされます。指定した時刻経過するか、メールによってアンロックができます。</p><br />
<br />
<p><h3 id="devise-install-helpers">(おまけ) よく使うdeviseのHelperメソッド</h3><i><b>#下記の'_user'はモデル名に依存する。つまり、モデル名が'admin'ならば、current_adminなどと記載する必要がある。</b></i></p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># ユーザがログインしていないとアクセスできない（Controllerに記載）</span>
before_action <span class="synConstant">:authenticate_user!</span>

<span class="synComment"># ユーザがサインインしているか調べる</span>
<span class="synComment"># 返り値は、true か false</span>
user_signed_in?

<span class="synComment"># サインインしているユーザオブジェクトを取得する</span>
current_user
</pre>
</div>
</div>
<div class="section">
    <h3>参考文献</h3>
    
<ul>
<li><a href="https://github.com/plataformatec/devise">plataformatec/devise &middot; GitHub</a></li>
</ul><p><br />
良く分からない、間違っている箇所などありましたら、お気軽に以下のコメント欄に記載ください。直に返します。</p>

</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140801/1406907000.html"><time data-relative datetime="2014-08-01T05:00:00Z" title="2014-08-01T05:00:00Z" pubdate class="updated">2014-08-01 14:00</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140801/1406907000" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140801%2F1406907000" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140801/1406907000" data-count="vertical" data-text="Railsのログイン認証gemのDeviseのインストール方法 - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140801/1406907000" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
          <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4438296558807254"
     data-ad-slot="4370884664"
     data-ad-format="horizontal"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
                <article class="entry hentry js-entry-article date-last autopagerize_page_element chars-8400 words-800 mode-hatena entry-odd" id="entry-12921228815729118316" data-keyword-campaign="" data-uuid="12921228815729118316">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date last">
        <a href="entries/2014/08/01.html" rel="nofollow">
          <time pubdate datetime="2014-07-31T15:00:00Z" title="2014-07-31T15:00:00Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">08</span><span class="hyphen">-</span><span class="date-day">01</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140801/1406818800.html" class="entry-title-link bookmark">RailsにTwitter Bootstrapの導入と簡易な使い方</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%20gem.html">Rails gem</a>
          
          <a href="archive/category/UI%7CUX.html">UI/UX</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222604.jpg" alt="f:id:nipe880324:20141215222604j:plain:w420" title="f:id:nipe880324:20141215222604j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><p>RailsでTwitter Bootstrap 3のインストール方法を説明します。<br />
また、Bootstrapのエラーメッセージの表示、ナビゲーションバーの追加、simple_formとの連携などの使い方を説明します。<br />
<br />
</p>

<div class="section">
    <h3>動作確認</h3>
    
<ul>
<li>Rails 4.1</li>
<li>twitter-bootstrap-rails 3.2.0</li>
</ul>
</div>
<div class="section">
    <h3>目次</h3>
    
<ol>
<li><a href="index-page=1407168000.html#twitter-bootstrap-create-project">Railsプロジェクトの作成</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-install1">Twitter Bootstrapのインストール方法1</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-install2">Twitter Bootstrapのインストール方法2</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-custmize-apply-views">カスタマイズ（ViewファイルへのTwitter Bootstrapの適用）</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-custmize-messages">カスタマイズ（サクセス、エラーメッセージの表示）</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-custmize-simple_form">カスタマイズ（simple_formとの連携: フォーム上でのエラーメッセージの表示）</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-custmize-sidebar">カスタマイズ（Sidebarの追加）</a></li>
<li><a href="index-page=1407168000.html#twitter-bootstrap-custmize-navigation">カスタマイズ（NavigationBarの追加）</a></li>
</ol><p></p><p><h3 id="twitter-bootstrap-create-project">1. Railsプロジェクトの作成</h3>まずは、Railsプロジェクトを作成し、ScaffoldでProductを作成します。</p>
<pre class="code" data-lang="" data-unlink>rails new twitter-bootstrap
5||&lt;

次に確認用にデータをScaffoldを実行します。
&gt;||
rails g scaffold Product name:string price:integer
rake db:migrate</pre><p><code>rails s</code>でサーバーを起動し現在の画面を確認しましょう。<br />
データを3件入れました。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222616.jpg" alt="f:id:nipe880324:20141215222616j:plain:w420" title="f:id:nipe880324:20141215222616j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<br />
<br />
<p><h3 id="twitter-bootstrap-install1">2. Twitter Bootstrapのインストール方法1</h3>インストール方法1では、Gemを使って簡易にBootstrapを導入していきます。</p><p>Gemfileに下記の3つのgemを追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>

gem <span class="synSpecial">'</span><span class="synConstant">therubyracer</span><span class="synSpecial">'</span> <span class="synComment"># javascript runtime。lessをコンパイルするために必要</span>
gem <span class="synSpecial">'</span><span class="synConstant">less-rails</span><span class="synSpecial">'</span> <span class="synComment"># Railsでlessを使えるようにする。Bootstrapがlessで書かれているため</span>
gem <span class="synSpecial">'</span><span class="synConstant">twitter-bootstrap-rails</span><span class="synSpecial">'</span> <span class="synComment"># Bootstrapの本体</span>
</pre><p>そして、gemをインストールします。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>bundle insatll
</pre><p>では、Railsプロジェクトにbootstrapのファイルを追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g bootstrap<span class="synConstant">:install</span>
      insert  app/assets/javascripts/application.js
      create  app/assets/javascripts/bootstrap.js.coffee
      create  app/assets/stylesheets/bootstrap_and_overrides.css.less
      create  config/locales/en.bootstrap.yml
        gsub  app/assets/stylesheets/application.css
        gsub  app/assets/stylesheets/application.css
</pre><p>これで、RailsにTwitter Bootstrapを導入できました。<br />
<code>rails server</code>で画面を確認してみましょう。<br />
上の画面と比べると、それっぽくなっているのではないでしょうか。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222635.jpg" alt="f:id:nipe880324:20141215222635j:plain:w420" title="f:id:nipe880324:20141215222635j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<br />
<br />
<p><h3 id="twitter-bootstrap-install2">3. Twitter Bootstrapのインストール方法2</h3>インストール方法2では、LessやGemとかよく分からないという方に、<br />
Bootstrpeの公式ページからファイルをダウンロードし、Railsに追加する方法を説明します。</p><p>まず<a href="http://getbootstrap.com/getting-started/#download" target="_blank">Bootstrapのダウンロードページ</a>からBootstrapのソースコードをダウンロードします。</p><p>そして、解凍し、<code>dist</code>内の下記のファイルをRailsプロジェクトにコピーします。<table>
<tr>
  <th>コピー元</th><th>コピー先</th>
</tr>
<tr>
  <td>dist/css/bootstrap.min.css</td><td>vendor/assets/stylesheets/.</td>
</tr>
<tr>
  <td>dist/js/bootstrap.min.js</td><td>vendor/assets/javascripts/.</td>
</tr>
<tr>
  <td>dist/fonts</td><td>vendor/assets/.</td>
</tr>
</table></p><p>そして、Railsに追加したbootstrapを読み込ませるようにします。</p>
<pre class="code" data-lang="" data-unlink># app/assets/javascripts/application.js

...
//
//= require jquery
//= require jquery_ujs
//= require bootstrap.min
//= require turbolinks
//= require_tree .</pre><pre class="code" data-lang="" data-unlink>#app/assets/stylesheets/application.css

 ...
 *
 *= require bootstrap.min
 *= require_tree .
 *= require_self
 */</pre><p><br />
<h3 id="twitter-bootstrap-custmize-apply-views">4. カスタマイズ（ViewファイルへのTwitter Bootstrapの適用）</h3>では、ここからはカスタマイズをして行きましょう。<br />
基本的に、それぞれのカスタマイズ項目は独立していますが、少し依存関係がある箇所もありますのでご注意ください。</p><p>現在の画面は、まだまだTwitter Bootstrapさがでていないですね。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222635.jpg" alt="f:id:nipe880324:20141215222635j:plain:w420" title="f:id:nipe880324:20141215222635j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<br />
<p>これは、適切なTwitter Bootstrap用の<code>class値</code>が設定されていないためです。<br />
そのため、Twitter Bootstrapを適用させます。ソースコードを変更してくれます。<br />
下記のファイルに何か修正を加えていた場合は上書きするかどうか聞かれます。<br />
※ インストール方法2で入れた場合は、このコマンドは使えません。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g bootstrap<span class="synConstant">:themed</span> <span class="synType">Products</span>
       force  app/views/products/index.html.erb
       force  app/views/products/new.html.erb
       force  app/views/products/edit.html.erb
       force  app/views/products/_form.html.erb
       force  app/views/products/show.html.erb
</pre><p><br />
では、サーバを起動して、画面を確認してみましょう。<br />
一気にそれっぽい雰囲気がでてきましたね。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222722.jpg" alt="f:id:nipe880324:20141215222722j:plain:w420" title="f:id:nipe880324:20141215222722j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<p>先ほどの少しだけソースコードを見てみましょう。<br />
<code>table table-striped</code>や<code>btn btn-primary</code>などTwitter Bootstrapのclass値が指定されていますね。<br />
実際にどのようなclass値が使えるかは<a href="http://getbootstrap.com/css/" target="_blank">公式ドキュメント</a>を参照して下さい。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/products/index.html.erb</span>
...
&lt;table <span class="synPreProc">class</span>=&quot;table table-striped<span class="synSpecial">&quot;</span><span class="synConstant">&gt;</span>
<span class="synConstant">   ...</span>
<span class="synConstant">&lt;/table&gt;</span>

<span class="synConstant">&lt;%= link_to t('.new', :default =&gt; t(</span><span class="synSpecial">&quot;</span>helpers.links.new<span class="synSpecial">&quot;</span><span class="synConstant">)),</span>
<span class="synConstant">            new_product_path,</span>
<span class="synConstant">            :class =&gt; 'btn btn-primary' %&gt;</span>
</pre><p></p><br />
<p><h3 id="twitter-bootstrap-custmize-messages">5. カスタマイズ（サクセス、エラーメッセージの表示）</h3>実は、現在２つ問題があります。<br />
・データを作成/更新したときにサクセスメッセージとエラーが発生したときにエラーメッセージが表示されない<br />
・フォームでエラーメッセージ表示されない</p><p>１つ目について、ここで解消します。２つ目は次の「simple_formとの連携」で解消します。<br />
サクセスメッセージやエラーメッセージは、<code>flash[:notice]</code>か<code>flash[:error]</code>のどちらかに入ってきます。<br />
また、Twitter Bootstrapでは、アラートは、<code>alert alert-success</codeや<code>alert alert-error</code>で表示させます。<br />
そのため、下記のようなコードを追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/layouts/application.html.erb</span>
  ...
&lt;body&gt;
&lt;% flash.each <span class="synStatement">do</span> |<span class="synIdentifier">name</span>, <span class="synIdentifier">msg</span>| %&gt;
  &lt;div <span class="synPreProc">class</span>=&quot;alert alert-&lt;%= name == <span class="synSpecial">&quot;</span><span class="synConstant">notice</span><span class="synSpecial">&quot;</span> ? <span class="synSpecial">&quot;</span><span class="synConstant">success</span><span class="synSpecial">&quot;</span> : <span class="synSpecial">&quot;</span><span class="synConstant">error</span><span class="synSpecial">&quot;</span> %&gt;<span class="synSpecial">&quot;</span><span class="synConstant">&gt;</span>
<span class="synConstant">    &lt;a class=</span><span class="synSpecial">&quot;</span>close<span class="synSpecial">&quot;</span><span class="synConstant"> data-dismiss=</span><span class="synSpecial">&quot;</span>alert<span class="synSpecial">&quot;</span><span class="synConstant">&gt;×&lt;/a&gt; &lt;!-- アラートダイアログに×ボタンをつける --&gt;</span>
<span class="synConstant">    &lt;%= msg %&gt;</span>
<span class="synConstant">  &lt;/div&gt;</span>
<span class="synConstant">&lt;% end %&gt;</span>

<span class="synConstant">&lt;%= yield %&gt;</span>

<span class="synConstant">&lt;/body&gt;</span>
<span class="synConstant">&lt;/html&gt;</span>
</pre><p>では、サーバを起動し、画面を確認します。<br />
データを登録すると上記にサクセスメッセージが表示されていますね。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222742.jpg" alt="f:id:nipe880324:20141215222742j:plain:w420" title="f:id:nipe880324:20141215222742j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<br />
<br />
<p><h3 id="twitter-bootstrap-custmize-simple_form">6. カスタマイズ（simple_formとの連携: フォーム上でのエラーメッセージの表示）</h3>では、もう１つの問題の、フォーム上でエラーメッセージを表示しましょう。<br />
まず、エラーメッセージを出すために、ModelにValidationを追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/models/product.rb</span>
<span class="synPreProc">class</span> <span class="synType">Product</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  validates <span class="synConstant">:name</span>,  <span class="synConstant">presence</span>: <span class="synConstant">true</span>
  validates <span class="synConstant">:price</span>, <span class="synConstant">presence</span>: <span class="synConstant">true</span>
<span class="synPreProc">end</span>
</pre><p>次に、<code>simple_form</code>を導入します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>
gem <span class="synSpecial">'</span><span class="synConstant">simple_form</span><span class="synSpecial">'</span>
</pre><p>そして、gemをインストールします。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>$ bundle install
</pre><pre class="code lang-ruby" data-lang="ruby" data-unlink>$ rails g simple_form<span class="synConstant">:install</span> --bootstrap
      create  config/initializers/simple_form.rb
      create  config/initializers/simple_form_bootstrap.rb
       exist  config/locales
      create  config/locales/simple_form.en.yml
      create  lib/templates/erb/scaffold/_form.html.erb
===============================================================================

  <span class="synType">Be</span> sure to have a copy of the <span class="synType">Bootstrap</span> stylesheet available on your
  application, you can get it on http<span class="synConstant">:/</span>/twitter.github.com/bootstrap.

  <span class="synType">Inside</span> your views, use the <span class="synSpecial">'</span><span class="synConstant">simple_form_for</span><span class="synSpecial">'</span> with one of the <span class="synType">Bootstrap</span> form
  classes, <span class="synSpecial">'</span><span class="synConstant">.form-horizontal</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">.form-inline</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">.form-search</span><span class="synSpecial">'</span> <span class="synStatement">or</span>
  <span class="synSpecial">'</span><span class="synConstant">.form-vertical</span><span class="synSpecial">'</span>, as the following:

    = simple_form_for(<span class="synIdentifier">@user</span>, <span class="synConstant">html</span>: {<span class="synPreProc">class</span>: <span class="synSpecial">'</span><span class="synConstant">form-horizontal</span><span class="synSpecial">'</span> }) <span class="synStatement">do</span> |<span class="synIdentifier">form</span>|

===============================================================================
</pre><p>フォームをsimple_formで書き換えます。</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/products/_form.html.erb
<span class="synIdentifier">&lt;%=</span><span class="synConstant"> simple_form_for</span><span class="synIdentifier"> @product, :html =&gt;</span> { :class =<span class="synError">&gt;</span> 'form-horizontal' } do |f| %<span class="synError">&gt;</span>
  <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.input</span><span class="synIdentifier"> :</span><span class="synType">name</span><span class="synIdentifier"> %&gt;</span>
  <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.input</span><span class="synIdentifier"> :price %&gt;</span>

  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;form-actions&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.submit</span><span class="synIdentifier"> nil, :</span><span class="synType">class</span><span class="synIdentifier"> =&gt;</span> 'btn btn-primary' %<span class="synError">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> t(</span><span class="synConstant">'.cancel'</span><span class="synIdentifier">, :default =&gt;</span> t(&quot;helpers.links.cancel&quot;)),
                products_path, :class =<span class="synError">&gt;</span> 'btn' %<span class="synError">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;% end %&gt;</span>
</pre><p><br />
これで、完成です。画面を開き、エラーメッセージを表示させましょう。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222817.jpg" alt="f:id:nipe880324:20141215222817j:plain:w420" title="f:id:nipe880324:20141215222817j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<p>もし、<code>simple_form</code>について、より詳しく知りたい場合は、<a href="entry/20140730/1406700205.html">Rails&#x306E;gem&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x3059;&#x3063;&#x304D;&#x308A;&#x3055;&#x305B;&#x308B; simple_form - Rails Webook</a>を参照ください。</p><br />
<br />
<br />
<p><h3 id="twitter-bootstrap-custmize-sidebar">7. カスタマイズ（Sidebarの追加）</h3>サイドバーを追加して行きますが、Twitter Bootstrapでは、</p>

<ul>
<li>fixed：940pxで横幅が要素の位置が固定される</li>
<li>fluid：ブラウザサイズに応じてと要素が広がる</li>
</ul><p>の２つがあります。</p><p>今回は、<code>fixed</code>でサイドバーを追加して行きます。<br />
Twitter Bootstrapでは、下記のような構成でレイアウトを作っていきます。</p>
<pre class="code lang-html" data-lang="html" data-unlink>...
<span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;container&quot;</span><span class="synIdentifier">&gt;</span> <span class="synComment">&lt;!-- container で全体を囲む --&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;row&quot;</span><span class="synIdentifier">&gt;</span> <span class="synComment">&lt;!-- row で列を作る --&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;span8&quot;</span><span class="synIdentifier">&gt;</span> <span class="synComment">&lt;!-- 12分割のグリッドシステムの8を使用 --&gt;</span>
      ... メインコンンツを記載 ...
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;span4&quot;</span><span class="synIdentifier">&gt;</span> <span class="synComment">&lt;!-- 12分割のグリッドシステムの4を使用 --&gt;</span>
      ... サイドバーコンンツを記載 ...
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
</pre><p><br />
では、上記の構成を全体のレイアウトファイルに適用させましょう。</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/layouts/application.html.erb
....
<span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;container&quot;</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;row&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;% flash.each do |</span><span class="synType">name</span><span class="synIdentifier">, msg| %&gt;</span>
      <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;alert alert-&lt;%= name == &quot;</span><span class="synIdentifier">notice</span><span class="synConstant">&quot; ? &quot;</span><span class="synIdentifier">success</span><span class="synConstant">&quot; : &quot;</span><span class="synIdentifier">error</span><span class="synConstant">&quot; %&gt;&quot;</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;</span><span class="synStatement">a</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;close&quot;</span><span class="synIdentifier"> </span><span class="synType">data</span><span class="synIdentifier">-dismiss=</span><span class="synConstant">&quot;alert&quot;</span><span class="synIdentifier">&gt;</span>×<span class="synIdentifier">&lt;/</span><span class="synStatement">a</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;%=</span><span class="synConstant"> msg</span><span class="synIdentifier"> %&gt;</span>
      <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;% end %&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;span8&quot;</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> yield</span><span class="synIdentifier"> %&gt;</span>
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;span4&quot;</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>Side bar<span class="synIdentifier">&lt;/</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">html</span><span class="synIdentifier">&gt;</span>
</pre><p><br />
では、サイドバーが追加されたことがわかると思います。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222844.jpg" alt="f:id:nipe880324:20141215222844j:plain:w420" title="f:id:nipe880324:20141215222844j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<p>ちなみに、ブラウザの横幅を狭めていくと、サイドバーが下側に移動すると思います。既に、レスポンシブデザインが適用されている証拠です。</p><br />
<br />
<br />
<p><h3 id="twitter-bootstrap-custmize-navigation">8. カスタマイズ（NavigationBarの追加）</h3>可読性を上げるために、headerを外部ファイル化します。<br />
<code>renderメソッド</code>でheaderを呼び出ます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/layouts/application.html.erb</span>
...
&lt;body&gt;
&lt;%= render <span class="synSpecial">'</span><span class="synConstant">layouts/header</span><span class="synSpecial">'</span> %&gt;
&lt;div <span class="synPreProc">class</span>=&quot;container&quot;&gt;
  &lt;div <span class="synPreProc">class</span>=&quot;row&quot;&gt;
    &lt;div <span class="synPreProc">class</span>=&quot;span8&quot;&gt;
...
</pre><p><br />
では、headerファイルを作ります。<br />
Twitter Bootstrapの<a href="http://getbootstrap.com/components/#navbar" target="_blank">Navigation Barの項目</a>を参考に作成します。</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/layouts/_haeder.html.erb
<span class="synIdentifier">&lt;</span>header<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;navbar navbar-default&quot;</span><span class="synIdentifier"> role=</span><span class="synConstant">&quot;navigation&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;navbar-inner&quot;</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;container&quot;</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;</span><span class="synStatement">a</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;btn btn-navbar&quot;</span><span class="synIdentifier"> </span><span class="synType">data</span><span class="synIdentifier">-toggle=</span><span class="synConstant">&quot;collapse&quot;</span><span class="synIdentifier"> </span><span class="synType">data</span><span class="synIdentifier">-</span><span class="synType">target</span><span class="synIdentifier">=</span><span class="synConstant">&quot;.nav-collapse&quot;</span><span class="synIdentifier">&gt;</span>
          <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;icon-bar&quot;</span><span class="synIdentifier">&gt;&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span>
          <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;icon-bar&quot;</span><span class="synIdentifier">&gt;&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span>
          <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;icon-bar&quot;</span><span class="synIdentifier">&gt;&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;/</span><span class="synStatement">a</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;</span><span class="synStatement">a</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;brand&quot;</span><span class="synIdentifier"> </span><span class="synType">href</span><span class="synIdentifier">=</span><span class="synConstant">&quot;#&quot;</span><span class="synIdentifier">&gt;</span><span class="synUnderlined">Some Store</span><span class="synIdentifier">&lt;/</span><span class="synStatement">a</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;nav-collapse&quot;</span><span class="synIdentifier">&gt;</span>
          <span class="synIdentifier">&lt;</span><span class="synStatement">ul</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;nav&quot;</span><span class="synIdentifier">&gt;</span>
            <span class="synIdentifier">&lt;</span><span class="synStatement">li</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;Products&quot;</span><span class="synIdentifier">, products_path %&gt;&lt;/</span><span class="synStatement">li</span><span class="synIdentifier">&gt;</span>
            <span class="synIdentifier">&lt;</span><span class="synStatement">li</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;Price List&quot;</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">li</span><span class="synIdentifier">&gt;</span>
            <span class="synIdentifier">&lt;</span><span class="synStatement">li</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;Contact Us&quot;</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">li</span><span class="synIdentifier">&gt;</span>
            <span class="synIdentifier">&lt;</span><span class="synStatement">li</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> link_to</span><span class="synIdentifier"> </span><span class="synConstant">&quot;Cart&quot;</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">li</span><span class="synIdentifier">&gt;</span>
          <span class="synIdentifier">&lt;/</span><span class="synStatement">ul</span><span class="synIdentifier">&gt;</span>
        <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>header<span class="synIdentifier">&gt;</span>
</pre><p><br />
また、IEの古いバージョンだとHTML5が上手く動かないので、それに対処するコードを追加します。<br />
さらに、モバイル端末での表示が良くするために、viewportを指定します。</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/layouts/application.html.erb
...
<span class="synIdentifier">&lt;</span><span class="synStatement">head</span><span class="synIdentifier">&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;</span><span class="synStatement">title</span><span class="synIdentifier">&gt;</span>TwitterBootstrap<span class="synIdentifier">&lt;/</span><span class="synStatement">title</span><span class="synIdentifier">&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;%=</span><span class="synConstant"> stylesheet_link_tag</span><span class="synIdentifier">    </span><span class="synConstant">'application'</span><span class="synIdentifier">, </span><span class="synType">media</span><span class="synIdentifier">: </span><span class="synConstant">'all'</span><span class="synIdentifier">, </span><span class="synConstant">'data-turbolinks-track'</span><span class="synIdentifier"> =&gt;</span><span class="synPreProc"> true %&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;%=</span><span class="synConstant"> javascript_include_tag</span><span class="synIdentifier"> </span><span class="synConstant">'application'</span><span class="synIdentifier">, </span><span class="synConstant">'data-turbolinks-track'</span><span class="synIdentifier"> =&gt;</span><span class="synPreProc"> true %&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;%=</span><span class="synConstant"> csrf_meta_tags</span><span class="synIdentifier"> %&gt;</span>
<span class="synPreProc">  </span><span class="synComment">&lt;!--[if lt IE 9]&gt;</span>
<span class="synComment">    &lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span>
<span class="synComment">  &lt;![endif]--&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;</span><span class="synStatement">meta</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;viewport&quot;</span><span class="synIdentifier"> </span><span class="synType">content</span><span class="synIdentifier">=</span><span class="synConstant">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">head</span><span class="synIdentifier">&gt;</span>
...
</pre><p><br />
では、画面にナビゲーションバーが表示されていることを確認しましょう。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20141215/20141215222917.jpg" alt="f:id:nipe880324:20141215222917j:plain:w420" title="f:id:nipe880324:20141215222917j:plain:w420" class="hatena-fotolife" style="width:420px" itemprop="image"></span></p><br />
<br />
<p></p>

</div>
<div class="section">
    <h3>参考文献</h3>
    <p><a href="http://getbootstrap.com/">Bootstrap &middot; The world&#39;s most popular mobile-first and responsive front-end framework.</a><br />
<a href="https://github.com/seyhunak/twitter-bootstrap-rails">seyhunak/twitter-bootstrap-rails &middot; GitHub</a></p>

</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140801/1406818800.html"><time data-relative datetime="2014-07-31T15:00:00Z" title="2014-07-31T15:00:00Z" pubdate class="updated">2014-08-01 00:00</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140801/1406818800" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140801%2F1406818800" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140801/1406818800" data-count="vertical" data-text="RailsにTwitter Bootstrapの導入と簡易な使い方 - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140801/1406818800" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
            
            <div class="google-afc-image test-google-rectangle-ads ">
              
              
                <script>
  var hatenadfp = hatenadfp || {};
  hatenadfp.adUnits = hatenadfp.adUnits || [];
  hatenadfp.adUnits.push(
    
      { unitName: 'blog_user_2nd', size: [[300, 250], [336, 280]], divId: 'google_afc_user_container_2', allowContentMatch: true }
    
  );
  hatenadfp.isNGContent = false;
  
</script>

                <div id="google_afc_user_container_2" class="google_afc_blocklink2_5 google_afc_boder"></div>
                
                  <a href="http://blog.hatena.ne.jp/guide/pro" class="open-pro-modal" data-guide-pro-modal-ad-url="http://hatenablog.com/guide/pro/modal/ad">広告を非表示にする</a>
                
                
              
            </div>
          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-8000 words-800 mode-hatena entry-even" id="entry-12921228815729045197" data-keyword-campaign="" data-uuid="12921228815729045197">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date first">
        <a href="entries/2014/07/30.html" rel="nofollow">
          <time pubdate datetime="2014-07-30T06:03:25Z" title="2014-07-30T06:03:25Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">07</span><span class="hyphen">-</span><span class="date-day">30</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140730/1406700205.html" class="entry-title-link bookmark">Railsのform_for内のコードをすっきりさせるsimple_formの使い方</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%20View.html">Rails View</a>
          
          <a href="archive/category/Rails%20gem.html">Rails gem</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p>Railsの<code>form_for</code>内のコードをすっきりさせることができる、<a href="https://github.com/plataformatec/simple_form" target="_blank">simple_form</a>のインストール方法、使い方、カスタマイズ方法、バリデーションエラーの表示について説明します。</p><p><code>form_for</code>で書いたコードです。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730145943.png" alt="f:id:nipe880324:20140730145943p:plain:w320" title="f:id:nipe880324:20140730145943p:plain:w320" class="hatena-fotolife" style="width:320px" itemprop="image"></span></p><p>これが、<code>simple_form</code>で書き直すとことにより、次のようにとてもすっきりさせることができます。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730145948.png" alt="f:id:nipe880324:20140730145948p:plain:w320" title="f:id:nipe880324:20140730145948p:plain:w320" class="hatena-fotolife" style="width:320px" itemprop="image"></span></p><br />
<p></p>

<div class="section">
    <h3>動作確認</h3>
    <p>・Rails 4.1<br />
・simple_form 3.0.2<br />
<br />
<br />
</p>

</div>
<div class="section">
    <h3>目次</h3>
    
<ol>
<li><a href="index-page=1407168000.html#simple_form-install">simple_formのインストール方法</a></li>
<li><a href="index-page=1407168000.html#simple_form-customize">simple_formのフィールドのカスタマイズ方法</a></li>
<li><a href="index-page=1407168000.html#simple_form-validation-error">simple_formのバリデーションエラーの表示方法</a></li>
</ol>
</div>
<div class="section">
    <h3>0. simple_formを使う環境の作成</h3>
    <p>まず、<code>simple_form</code>を使うには、フォーム内がごちゃごちゃしていないと意味があまり無いので、その環境を作ります。</p>

<div class="section">
    <h5>Railsプロジェクトの作成</h5>
    <p>Railsプロジェクトを作成します。</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>rails new simple_form_test
<span class="synStatement">cd</span> simple_form_test
</pre>
</div>
<div class="section">
    <h5>ModelとDBの作成とScaffoldの実施</h5>
    <p>今回作成するプロジェクトのER図は次のようになっています。<br />
CategoryとProductを多対多関係にするために、Categorizationというテーブルを作成しています。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140728/20140728195741.png" alt="f:id:nipe880324:20140728195741p:plain:w320" title="f:id:nipe880324:20140728195741p:plain:w320" class="hatena-fotolife" style="width:320px" itemprop="image"></span><br />
</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>rails g model <span class="synType">Category</span> name<span class="synConstant">:string</span>
rails g model <span class="synType">Publisher</span> name<span class="synConstant">:string</span>
rails g scaffold <span class="synType">Product</span> name<span class="synConstant">:string</span> price<span class="synConstant">:integer</span> released_on<span class="synConstant">:date</span> rating<span class="synConstant">:integer</span> discontinued<span class="synConstant">:boolean</span> publisher<span class="synConstant">:references</span>
rails g model <span class="synType">Categorization</span> product<span class="synConstant">:references</span> category<span class="synConstant">:references</span>
</pre><p>Productのdiscontinuedカラム（販売中止かどうかのフラグ）をデフォルトでは<code>false</code>にしたいので、<code>default</code>を設定します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># db/migrate/yyyymmddhhmmss_create_products.rb</span>
  t.boolean <span class="synConstant">:discontinued</span>, <span class="synConstant">default</span>: <span class="synConstant">false</span>, <span class="synConstant">null</span>: <span class="synConstant">false</span>
</pre><p>DBマイグレートします。</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>rake db:migrate
</pre>
</div>
<div class="section">
    <h5>Modelファイルに関連の追加</h5>
    <p>ER図に沿ってリレーションを追加します。<br />
<i>Modelの生成時に、<code>references</code>を指定しているので、<code>belongs_to</code>は既に記載されていると思いますが、全てのModelを記載しておきます。</i><br />
</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/models/categorization.rb</span>
<span class="synPreProc">class</span> <span class="synType">Categorization</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  belongs_to <span class="synConstant">:category</span>
  belongs_to <span class="synConstant">:product</span>
<span class="synPreProc">end</span>

<span class="synComment"># app/models/category.rb</span>
<span class="synPreProc">class</span> <span class="synType">Category</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  has_many <span class="synConstant">:categorizastions</span>
  has_many <span class="synConstant">:products</span>, <span class="synConstant">through</span>: <span class="synConstant">:categorizations</span>
<span class="synPreProc">end</span>

<span class="synComment"># app/models/product.rb</span>
<span class="synPreProc">class</span> <span class="synType">Product</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  belongs_to <span class="synConstant">:publisher</span>
  has_many <span class="synConstant">:categorizations</span>
  has_many <span class="synConstant">:categories</span>, <span class="synConstant">through</span>: <span class="synConstant">:categorizations</span>
<span class="synPreProc">end</span>

<span class="synComment"># app/models/publisher.rb</span>
<span class="synPreProc">class</span> <span class="synType">Publisher</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
  has_many <span class="synConstant">:products</span>
<span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
    <h5>初期データの作成と投入</h5>
    <p>今回はCategoryとPublisherの登録画面を作成しないので、初期データを<code>rake db:seed</code>経由で登録しまておきます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># db/seeds.rb</span>
literature = <span class="synType">Category</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">文学</span><span class="synSpecial">&quot;</span>
history = <span class="synType">Category</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">歴史</span><span class="synSpecial">&quot;</span>
business = <span class="synType">Category</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">ビジネス</span><span class="synSpecial">&quot;</span>
science = <span class="synType">Category</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">科学</span><span class="synSpecial">&quot;</span>
comic = <span class="synType">Category</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">コミック</span><span class="synSpecial">&quot;</span>

suzuki = <span class="synType">Publisher</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">鈴木書店</span><span class="synSpecial">&quot;</span>
tanaka = <span class="synType">Publisher</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">田中出版</span><span class="synSpecial">&quot;</span>
shugo = <span class="synType">Publisher</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">集合社</span><span class="synSpecial">&quot;</span>
otona = <span class="synType">Publisher</span>.create! <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">大人館</span><span class="synSpecial">&quot;</span>
</pre><p>入力したデータを投入します。</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>rake db:seed
</pre>
</div>
<div class="section">
    <h5>フォームの修正（Productの新規/編集画面）</h5>
    <p>Scaffoldでは適切でない入力項目もあるので、修正します。<br />
下記にソースコードを全て記載していますが、修正した箇所は次の通りです。<br />
・ratingを「テキストフィールド」から「ラジオボタン」に変更<br />
・publisher_idを「テキストフィールド」から「セレクトボックス」に変更<br />
・categoryを選択できるチェックボックスを追加</p>
<pre class="code lang-html" data-lang="html" data-unlink># app/views/products/_form.html.erb
<span class="synIdentifier">&lt;%=</span><span class="synConstant"> form_for(@product)</span><span class="synIdentifier"> do |f| %&gt;</span>
  <span class="synIdentifier">&lt;% if @product.errors.any? %&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">id</span><span class="synIdentifier">=</span><span class="synConstant">&quot;error_explanation&quot;</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> pluralize(@product.errors.count,</span><span class="synIdentifier"> </span><span class="synConstant">&quot;error&quot;</span><span class="synIdentifier">) %&gt;</span> prohibited this product from being saved:<span class="synIdentifier">&lt;/</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>

      <span class="synIdentifier">&lt;</span><span class="synStatement">ul</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;% @product.errors.full_messages.each do |message| %&gt;</span>
        <span class="synIdentifier">&lt;</span><span class="synStatement">li</span><span class="synIdentifier">&gt;&lt;%=</span><span class="synConstant"> message</span><span class="synIdentifier"> %&gt;&lt;/</span><span class="synStatement">li</span><span class="synIdentifier">&gt;</span>
      <span class="synIdentifier">&lt;% end %&gt;</span>
      <span class="synIdentifier">&lt;/</span><span class="synStatement">ul</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;% end %&gt;</span>

  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :</span><span class="synType">name</span><span class="synIdentifier"> %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.text_field</span><span class="synIdentifier"> :</span><span class="synType">name</span><span class="synIdentifier"> %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :price %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.text_field</span><span class="synIdentifier"> :price %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :released_on %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.date_select</span><span class="synIdentifier"> :released_on %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :rating %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier"> /&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.radio_button</span><span class="synIdentifier"> :rating, 1 %&gt;</span> 1
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.radio_button</span><span class="synIdentifier"> :rating, 2 %&gt;</span> 2
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.radio_button</span><span class="synIdentifier"> :rating, 3 %&gt;</span> 3
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.radio_button</span><span class="synIdentifier"> :rating, 4 %&gt;</span> 4
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.radio_button</span><span class="synIdentifier"> :rating, 5 %&gt;</span> 5
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :discontinued %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.check_box</span><span class="synIdentifier"> :discontinued %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.label</span><span class="synIdentifier"> :publisher_id %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier"> /&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.collection_select</span><span class="synIdentifier"> :publisher_id, Publisher.all, :</span><span class="synType">id</span><span class="synIdentifier">, :</span><span class="synType">name</span><span class="synIdentifier">, include_blank: true %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;% Category.all.each do |category| %&gt;</span>
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> check_box_tag</span><span class="synIdentifier"> </span><span class="synConstant">&quot;product[category_ids][]&quot;</span><span class="synIdentifier">, category.</span><span class="synType">id</span><span class="synIdentifier">, @product.category_ids.include?(category.</span><span class="synType">id</span><span class="synIdentifier">), </span><span class="synType">id</span><span class="synIdentifier">: dom_id(category) %&gt;</span>
      <span class="synIdentifier">&lt;%=</span><span class="synConstant"> label_tag</span><span class="synIdentifier"> dom_id(category), category.</span><span class="synType">name</span><span class="synIdentifier"> %&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier"> /&gt;</span>
    <span class="synIdentifier">&lt;% end %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;actions&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;%=</span><span class="synConstant"> f.submit</span><span class="synIdentifier"> %&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;% end %&gt;</span>
</pre><p>カテゴリを更新できるようにコントローラーのStrongParameters内で<code>category_ids: []</code>を追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/controllers/products_controller.rb</span>
  ...
    <span class="synComment"># Never trust parameters from the scary internet, only allow the white list through.</span>
    <span class="synPreProc">def</span> <span class="synIdentifier">product_params</span>
      params.require(<span class="synConstant">:product</span>).permit(<span class="synConstant">:name</span>, <span class="synConstant">:price</span>, <span class="synConstant">:released_on</span>, <span class="synConstant">:rating</span>, <span class="synConstant">:discontinued</span>, <span class="synConstant">:publisher_id</span>, <span class="synConstant">category_ids</span>: [])
    <span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
    <h5>Productの登録確認</h5>
    <p><code>$ server s</code>でローカルサーバを起動し、Productが登録できることを確認して下さい。<br />
<b>[登録画面]</b><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730142443.png" alt="f:id:nipe880324:20140730142443p:plain:w480" title="f:id:nipe880324:20140730142443p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><p><b>[詳細画面]</b><br />
※登録できたことがわかると思います。Publisherの表示がおかしく、カテゴリも表示されていませんが、show.html.erbを修正すれば適切に表示されます。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730142445.png" alt="f:id:nipe880324:20140730142445p:plain:w480" title="f:id:nipe880324:20140730142445p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<p>長かったですが、これで準備は終わりです。<br />
今の<code>form_for</code>内はとても長いですよね。<br />
これを、<code>simple_form</code>を使うことによりとてもすっきりさせることができます。</p><br />
<p><h3 id="simple_form-install">1. simple_formのインストール方法</h3><code>simple_form</code>をインストールしていきます。</p>

</div>
<div class="section">
    <h5>Simple formのインストール</h5>
    <p>Gemfileに追加します。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>
gem <span class="synSpecial">'</span><span class="synConstant">simple_form</span><span class="synSpecial">'</span>
</pre><p><br />
バンドルを実行します。</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>bundle <span class="synStatement">install</span>
</pre><p><br />
<code>simple_form</code>をRailsプロジェクトにインストールします。</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>rails g simple_form:<span class="synStatement">install</span>
      create  config/initializers/simple_form.rb
       exist  config/locales
      create  config/locales/simple_form.en.yml
      create  lib/templates/erb/scaffold/_form.html.erb
</pre>
</div>
<div class="section">
    <h5>simple_formでform_forを書き直す</h5>
    <p>書き換えた後のソースコードを全て記載しています。<br />
書き換える考え方としては、<br />
・<code>form_for</code>を<code>simple_form_for</code>にする。<br />
・Input要素は、<code><%= f.input :xxx %></code>にする。<br />
・関連があるInput要素は、<code><%= f.association :yyy %></code>に変えて下さい。</p><p>変更前と比べるととてもすっきりしたコードになっていると思います。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>&lt;%= simple_form_for(<span class="synIdentifier">@product</span>) <span class="synStatement">do</span> |<span class="synIdentifier">f</span>| %&gt;
  &lt;%= f.input <span class="synConstant">:name</span> %&gt;
  &lt;%= f.input <span class="synConstant">:price</span> %&gt;
  &lt;%= f.input <span class="synConstant">:released_on</span> %&gt;
  &lt;%= f.input <span class="synConstant">:rating</span> %&gt;
  &lt;%= f.input <span class="synConstant">:discontinued</span> %&gt;
  &lt;%= f.association <span class="synConstant">:publisher</span> %&gt;
  &lt;%= f.association <span class="synConstant">:categories</span> %&gt;
  &lt;%= f.button <span class="synConstant">:submit</span> %&gt;
&lt;% <span class="synStatement">end</span> %&gt;
</pre><p><br />
では、スタイリングファイルを作成し、スタイリングも追加します。</p>
<pre class="code lang-css" data-lang="css" data-unlink># app/assets/stylesheets/forms<span class="synIdentifier">.css.scss</span>
<span class="synIdentifier">.simple_form</span> <span class="synIdentifier">{</span>
  label {
    <span class="synType">margin</span>: <span class="synConstant">2px</span> <span class="synConstant">10px</span>;
    &amp;.radio, &amp;.checkbox {
      <span class="synType">float</span>: <span class="synType">none</span>;
      <span class="synType">margin</span>: <span class="synConstant">0</span>;
      <span class="synType">width</span>: <span class="synType">auto</span>;
      <span class="synType">text-align</span>: <span class="synType">left</span>;
    <span class="synIdentifier">}</span>
    &amp;<span class="synIdentifier">.checkbox</span> <span class="synIdentifier">{</span>
      <span class="synType">display</span>: <span class="synType">block</span>;
    <span class="synIdentifier">}</span>
    &amp;<span class="synIdentifier">.radio</span> <span class="synIdentifier">{</span> <span class="synType">margin-right</span>: <span class="synConstant">10px</span>; <span class="synIdentifier">}</span>
  <span class="synError">}</span>
  <span class="synStatement">div</span><span class="synIdentifier">.input</span> <span class="synIdentifier">{</span> <span class="synType">margin-bottom</span>: <span class="synConstant">10px</span>;<span class="synIdentifier">}</span>
  <span class="synStatement">input</span><span class="synIdentifier">.radio_buttons</span>, <span class="synStatement">input</span><span class="synIdentifier">.check_boxes</span> <span class="synIdentifier">{</span>
    <span class="synType">margin-right</span>: <span class="synConstant">5px</span>;
  <span class="synIdentifier">}</span>
  <span class="synIdentifier">.alert-error</span> <span class="synIdentifier">{</span>
    <span class="synType">color</span>: <span class="synConstant">#D00</span>;
    <span class="synType">margin-bottom</span>: <span class="synConstant">10px</span>;
    <span class="synType">font-weight</span>: <span class="synType">bold</span>;
  <span class="synIdentifier">}</span>
  <span class="synIdentifier">.hint</span>, <span class="synIdentifier">.error</span> <span class="synIdentifier">{</span>
    <span class="synType">clear</span>: <span class="synType">left</span>;
    <span class="synType">font-size</span>: <span class="synConstant">12px</span>;
    <span class="synType">color</span>: <span class="synConstant">#D00</span>;
    <span class="synType">display</span>: <span class="synType">block</span>;
  <span class="synIdentifier">}</span>
  <span class="synIdentifier">.hint</span> <span class="synIdentifier">{</span>
    <span class="synType">color</span>: <span class="synConstant">#555</span>;
    <span class="synType">font-style</span>: <span class="synType">italic</span>;
  <span class="synIdentifier">}</span>
<span class="synError">}</span>
</pre><p><br />
では、サーバを起動し、画面を確認しましょう。<br />
コードは短くなったのに、画面表示はほとんど同じですね。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730144535.png" alt="f:id:nipe880324:20140730144535p:plain:w480" title="f:id:nipe880324:20140730144535p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<p><b>[補足説明]</b><br />
<code>simple_form</code>はDBカラムの型からHTMLの要素を決めています。<br />
例えば、<br />
・String型なら、テキストフィールド<br />
・Integerなど数値型なら、数値フィールド<br />
・Date型なら、日付フィールド<br />
・Boolean型なら、チェックボックス<br />
などです。<br />
<a href="http://simple-form.plataformatec.com.br/#available-input-types-and-defaults-for-each-column-type" target="_blank">公式ドキュメント</a>に対応は記載されています。</p><br />
<br />
<p><h3 id="simple_form-customize">2. simple_formのフィールドのカスタマイズ方法</h3>先ほどの画面では、ratingをラジオボタンにしたい、カテゴリをチェックボックスにしたいなどいまいちな箇所があります。<br />
実際に変更しながら、フィールドのカスタマイズ方法を説明しいきます。</p>

</div>
<div class="section">
    <h4>Inputフィールドのタイプを指定</h4>
    <p><code>as</code>オプションを使うことで、Inputフィールドのタイプを指定することができます。<br />
ここでは、categoriesをチェックボックスで表示させます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>&lt;%= f.association <span class="synConstant">:categories</span>, <span class="synConstant">as</span>: <span class="synConstant">:check_boxes</span> %&gt;
</pre><p>使えるInputタイプについては、「<a href="https://github.com/plataformatec/simple_form#available-input-types-and-defaults-for-each-column-type" target="_blank">利用可能なInputタイプ</a>のMapping列」を確認して下さい。</p>

</div>
<div class="section">
    <h4>ラベルを設定する</h4>
    <p><code>label</code>オプションを使うことで、ラベルの文字を指定できます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>  &lt;%= f.input <span class="synConstant">:name</span>, <span class="synConstant">label</span>: <span class="synSpecial">&quot;</span><span class="synConstant">名前</span><span class="synSpecial">&quot;</span> %&gt;
</pre>
</div>
<div class="section">
    <h4>ヒントを追加する</h4>
    <p><code>hint</code>オプションを使うことで、ヒントの文字を追加できます。<br />
ヒントとは、inputフィールドの下に表示される文字列のことで、ユーザが入力時の簡単な説明になります。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>  &lt;%= f.input <span class="synConstant">:price</span>, <span class="synConstant">label</span>: <span class="synSpecial">&quot;</span><span class="synConstant">値段</span><span class="synSpecial">&quot;</span>, <span class="synConstant">hint</span>: <span class="synSpecial">&quot;</span><span class="synConstant">値段は円で入力して下さい</span><span class="synSpecial">&quot;</span> %&gt;
</pre>
</div>
<div class="section">
    <h4>範囲を指定する</h4>
    <p><code>collection</code>オプションで範囲オブジェクトか配列を引数に渡すと、その値の範囲のセレクトボックスになります。しかし、今回はラジオボタンで表示したいので、asオプションでラジオボタンを指定しています。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>  &lt;%= f.input <span class="synConstant">:rating</span>, <span class="synConstant">collection</span>: <span class="synConstant">1</span>..<span class="synConstant">5</span>, <span class="synConstant">as</span>: <span class="synConstant">:radio_buttons</span> %&gt;
</pre>
</div>
<div class="section">
    <h4>ラベルとinput要素のhtml属性を指定する</h4>
    <p><code>lable_html</code>と<code>input_html</code>オプションとhtml属性を指定することにより、属性をしていできます。<br />
今回はテストのため、名前を赤色に、入力ボックスの角を丸めるように<code>style</code>属性を指定しました。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>  &lt;%= f.input <span class="synConstant">:name</span>, <span class="synConstant">label</span>: <span class="synSpecial">&quot;</span><span class="synConstant">名前</span><span class="synSpecial">&quot;</span>,
    <span class="synConstant">label_html</span>: { <span class="synConstant">style</span>: <span class="synSpecial">'</span><span class="synConstant">color:red;</span><span class="synSpecial">'</span> }, <span class="synConstant">input_html</span>: { <span class="synConstant">style</span>: <span class="synSpecial">'</span><span class="synConstant">border-radius:5px;</span><span class="synSpecial">'</span> } %&gt;
</pre><p>その他やりたいことがありましたら、<a href="http://simple-form.plataformatec.com.br/#usage/stripping-away-all-wrapper-divs" target="_blank">Simple form 公式ドキュメント</a>を確認して下さい。</p><p>では、変更した画像を見てみましょう。<br />
実際に、ラジオボタンやチェックボックスになっていることが分かると思います。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730145404.png" alt="f:id:nipe880324:20140730145404p:plain:w480" title="f:id:nipe880324:20140730145404p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<br />
<br />
<p><h3 id="simple_form-validation-error">3. simple_formのバリデーションエラーの表示方法</h3>Modelクラスに<code>validates</code>メソッドを追加することで、フォーム上にValidationのエラーメッセージが表示されます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/models/product.rb</span>
...
  validates <span class="synConstant">:email</span>, <span class="synConstant">presence</span>: <span class="synConstant">true</span> <span class="synComment"># email属性が空の場合Validationエラー</span>
...
</pre><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730145701.png" alt="f:id:nipe880324:20140730145701p:plain:w480" title="f:id:nipe880324:20140730145701p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<br />
<p><code>simple form</code>はラベルに自動で"*"マークをつけ、エラー文字も表示してくれます。<br />
"*"マークを表示したくないや、他のマークにしたい場合、<code>config/initializers/simple_form.rb</code>に設定項目があるので変更できます。</p><p>また、日本語化をしたい場合は、<code>config/locales/simple_form.en.yml</code>を真似て、日本語用ファイルを作成してください。</p><p>エラーメッセージをフォームの上部に表示させたい場合は、下記を追加して下さい。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/products/_form.html.erb</span>
&lt;%= simple_form_for(<span class="synIdentifier">@product</span>) <span class="synStatement">do</span> |<span class="synIdentifier">f</span>| %&gt;
  &lt;%= f.error_notification %&gt;

  &lt;%= f.input <span class="synConstant">:name</span>, <span class="synConstant">label</span>: <span class="synSpecial">&quot;</span><span class="synConstant">名前</span><span class="synSpecial">&quot;</span>,
    <span class="synConstant">label_html</span>: { <span class="synConstant">style</span>: <span class="synSpecial">'</span><span class="synConstant">color:red;</span><span class="synSpecial">'</span> }, <span class="synConstant">input_html</span>: { <span class="synConstant">style</span>: <span class="synSpecial">'</span><span class="synConstant">border-radius:5px;</span><span class="synSpecial">'</span> } %&gt;
...
</pre><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140730/20140730145836.png" alt="f:id:nipe880324:20140730145836p:plain:w480" title="f:id:nipe880324:20140730145836p:plain:w480" class="hatena-fotolife" style="width:480px" itemprop="image"></span></p><br />
<p>デザインがいまいちと思われた方は、<code>simple_form</code>と<code>Twitter Bootstrap</code>は連携できるので、<br />
<a href="entry/20140801/1406818800.html">Rails&#x306B;Twitter Bootstrap&#x306E;&#x5C0E;&#x5165;&#x3068;&#x7C21;&#x6613;&#x306A;&#x4F7F;&#x3044;&#x65B9; - Rails Webook</a><br />
を参照して見て下さい。</p><p>以上です。</p>

</div>
</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140730/1406700205.html"><time data-relative datetime="2014-07-30T06:03:25Z" title="2014-07-30T06:03:25Z" pubdate class="updated">2014-07-30 15:03</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140730/1406700205" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140730%2F1406700205" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140730/1406700205" data-count="vertical" data-text="Railsのform_for内のコードをすっきりさせるsimple_formの使い方 - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140730/1406700205" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
          <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4438296558807254"
     data-ad-slot="4370884664"
     data-ad-format="horizontal"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-2800 words-400 mode-hatena entry-odd" id="entry-12921228815728962272" data-keyword-campaign="" data-uuid="12921228815728962272">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="entry-date date first">
        <a href="entries/2014/07/27.html" rel="nofollow">
          <time pubdate datetime="2014-07-27T08:10:10Z" title="2014-07-27T08:10:10Z">
            <span class="date-year">2014</span><span class="hyphen">-</span><span class="date-month">07</span><span class="hyphen">-</span><span class="date-day">27</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="entry/20140727/1406448610.html" class="entry-title-link bookmark">Railsのform_forを使ったフォームのController,View,Modelの連携した処理フロー</a>
      </h1>
      
      
        <div class="entry-categories categories">
          
          <a href="archive/category/Rails%20View.html">Rails View</a>
          
        </div>
      
      

      
    </header>
        
    <div class="entry-content">

      
        <p>Rails のform_forを使ったフォームのController、View、Modelの連携がよく分からない、何となく動いているけど理解していないからカスタマイズなどできそうにないといった方向け、form_forメソッドを中心としたMVCが連携する処理フローを説明していきます。<br />
<br />
</p>

<div class="section">
    <h3>動作確認</h3>
    <p>・Rails 4.1.0<br />
<br />
</p>

</div>
<div class="section">
    <h3>処理フロー概要</h3>
    <p>1. Controllerの<code>newメソッド/editメソッド</code>でModelオブジェクトを生成しインスタンス変数（例：@userなど）に値を設定<br />
2. Viewの<code>form_forメソッド</code>でModelオブジェクトのカラムを使用したフォームを作成し、表示する。<br />
3. ユーザがサブミットすると、params変数に入力したパラメータがハッシュの形で設定されてControllerに届く。<br />
4. Controllerの<code>createメソッド /updateメソッド</code>でparams変数でModelオブジェクトを作成/更新する。<br />
という流れです。<br />
<br />
</p>

</div>
<div class="section">
    <h3>新規登録フロー</h3>
    
<div class="section">
    <h4>前提</h4>
    <p>Userテーブルには<code>name</code>と<code>email</code>というカラムが存在していて、<code>user.rbファイル</code>が作成されている。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/models/user.rb</span>
<span class="synPreProc">class</span> <span class="synType">User</span> &lt; <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
<span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
    <h4>1. Controllerの<code>newメソッド</code>でModelオブジェクトを生成しインスタンス変数に設定</h4>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/controllers/users_controller.rb</span>
... 
<span class="synPreProc">def</span> <span class="synIdentifier">new</span>
  <span class="synComment"># @user に空のModelオブジェクトを作成し、インタンス変数@userに設定</span>
  <span class="synComment"># @userはViewでも使える</span>
  <span class="synComment"># Controllerでrenderやredirect_toなどで明示的にレンダリングするViewをしていない場合は、</span>
  <span class="synComment"># メソッド名のViewファイルがレンダリングされる（例：new =&gt; new.html.erb）</span>
  <span class="synIdentifier">@user</span> = <span class="synType">User</span>.new
<span class="synPreProc">end</span>
...
</pre>
</div>
<div class="section">
    <h4>2. Viewの<code>form_forメソッド</code>でフォームを作成し、表示</h4>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/views/users/new.html.erb</span>
...
<span class="synComment"># form_forに@userを渡すことにより、Userテーブルのnameとemailカラムの</span>
<span class="synComment"># ラベルやテキストフィールドなどのinput要素を簡易に作成することができる</span>
&lt;%= form_for <span class="synIdentifier">@user</span> <span class="synStatement">do</span> |<span class="synIdentifier">f</span>| %&gt;

  &lt;div <span class="synPreProc">class</span>=&quot;field&quot;&gt;
    &lt;%= f.label <span class="synConstant">:name</span>, <span class="synSpecial">&quot;</span><span class="synConstant">名前</span><span class="synSpecial">&quot;</span> %&gt;
    &lt;%= f.text_field <span class="synConstant">:name</span> %&gt;
  &lt;/div&gt;

  &lt;div <span class="synPreProc">class</span>=&quot;field&quot;&gt;
    &lt;%= f.label <span class="synConstant">:email</span>, <span class="synSpecial">&quot;</span><span class="synConstant">メールアドレス</span><span class="synSpecial">&quot;</span> %&gt;
    &lt;%= f.text_field <span class="synConstant">:email</span> %&gt;
  &lt;/div&gt;
  
  &lt;div <span class="synPreProc">class</span>=&quot;actions&quot;&gt;
    &lt;%= f.submit <span class="synSpecial">&quot;</span><span class="synConstant">登録する</span><span class="synSpecial">&quot;</span> %&gt;
  &lt;/div&gt;
&lt;% <span class="synPreProc">end</span> %&gt;
...
</pre>
</div>
<div class="section">
    <h4>作成された画面のフォーム部分は...</h4>
    <p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/n/nipe880324/20140727/20140727165659.png" alt="f:id:nipe880324:20140727165659p:plain" title="f:id:nipe880324:20140727165659p:plain" class="hatena-fotolife" itemprop="image"></span><br />
</p>

</div>
<div class="section">
    <h4>作成されたHTMLは...</h4>
    <p><code>input属性</code>の<code>name属性</code>に注目しといて下さい。これは、Model名とそのカラム名になっていることが分かると思います。</p>
<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">form</span><span class="synIdentifier"> </span><span class="synType">accept</span><span class="synIdentifier">-</span><span class="synType">charset</span><span class="synIdentifier">=</span><span class="synConstant">&quot;UTF-8&quot;</span><span class="synIdentifier"> </span><span class="synType">action</span><span class="synIdentifier">=</span><span class="synConstant">&quot;/users&quot;</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;new_user&quot;</span><span class="synIdentifier"> </span><span class="synType">id</span><span class="synIdentifier">=</span><span class="synConstant">&quot;new_user&quot;</span><span class="synIdentifier"> </span><span class="synType">method</span><span class="synIdentifier">=</span><span class="synConstant">&quot;post&quot;</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">style</span><span class="synIdentifier">=</span><span class="synConstant">&quot;display:none&quot;</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">input</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;utf8&quot;</span><span class="synIdentifier"> </span><span class="synType">type</span><span class="synIdentifier">=</span><span class="synConstant">&quot;hidden&quot;</span><span class="synIdentifier"> </span><span class="synType">value</span><span class="synIdentifier">=</span><span class="synConstant">&quot;✓&quot;</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">input</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;authenticity_token&quot;</span><span class="synIdentifier"> </span><span class="synType">type</span><span class="synIdentifier">=</span><span class="synConstant">&quot;hidden&quot;</span><span class="synIdentifier"> </span><span class="synType">value</span><span class="synIdentifier">=</span><span class="synConstant">&quot;RIDGusRT/gJ2C+y+FKFV2P6rfN1mmNrQNWGX2sAtWrQ=&quot;</span><span class="synIdentifier">&gt;&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>

  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">label</span><span class="synIdentifier"> </span><span class="synType">for</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user_name&quot;</span><span class="synIdentifier">&gt;</span>名前<span class="synIdentifier">&lt;/</span><span class="synStatement">label</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">input</span><span class="synIdentifier"> </span><span class="synType">id</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user_name&quot;</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user[name]&quot;</span><span class="synIdentifier"> </span><span class="synType">type</span><span class="synIdentifier">=</span><span class="synConstant">&quot;text&quot;</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>

  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;field&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">label</span><span class="synIdentifier"> </span><span class="synType">for</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user_email&quot;</span><span class="synIdentifier">&gt;</span>メールアドレス<span class="synIdentifier">&lt;/</span><span class="synStatement">label</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">input</span><span class="synIdentifier"> </span><span class="synType">id</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user_email&quot;</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;user[email]&quot;</span><span class="synIdentifier"> </span><span class="synType">type</span><span class="synIdentifier">=</span><span class="synConstant">&quot;text&quot;</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;actions&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">input</span><span class="synIdentifier"> </span><span class="synType">name</span><span class="synIdentifier">=</span><span class="synConstant">&quot;commit&quot;</span><span class="synIdentifier"> </span><span class="synType">type</span><span class="synIdentifier">=</span><span class="synConstant">&quot;submit&quot;</span><span class="synIdentifier"> </span><span class="synType">value</span><span class="synIdentifier">=</span><span class="synConstant">&quot;登録する&quot;</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">form</span><span class="synIdentifier">&gt;</span>
</pre>
</div>
<div class="section">
    <h4>3. ユーザがサブミットすると、params変数に入力したパラメータがハッシュの形で設定されてControllerに届く</h4>
    <p>先ほどの、<code>input要素</code>の<code>name属性</code>をキーとしてハッシュ形式でparamsに設定されます。</p>
<pre class="code lang-ruby" data-lang="ruby" data-unlink>params =
  {
    <span class="synConstant">user</span>: {  <span class="synComment"># params[:user] で { name: &quot;鈴木&quot;, email: &quot;suzu...&quot; } を取得可能</span>
      <span class="synConstant">name</span>: <span class="synSpecial">&quot;</span><span class="synConstant">鈴木</span><span class="synSpecial">&quot;</span>,     <span class="synComment"># params[:user][:name] で値を取得可能</span>
      <span class="synConstant">email</span>: <span class="synSpecial">&quot;</span><span class="synConstant">suzuki@example.com</span><span class="synSpecial">&quot;</span>   <span class="synComment"># params[:user][:email] で値を取得可能</span>
    }
  }
</pre>
</div>
<div class="section">
    <h4>4. Controllerの<code>createメソッド</code>でparams変数でModelオブジェクトを作成</h4>
    <pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># app/controllers/users_controller.rb</span>
... 
<span class="synPreProc">def</span> <span class="synIdentifier">create</span>
  <span class="synIdentifier">@user</span> = <span class="synType">User</span>.new(user_params)
  <span class="synStatement">if</span> <span class="synIdentifier">@user</span>.save
    <span class="synComment"># @userはuser_path(@user) に自動変換される</span>
    redirect_to <span class="synIdentifier">@user</span>, <span class="synConstant">notice</span>: <span class="synSpecial">&quot;</span><span class="synConstant">ユーザ登録しました。</span><span class="synSpecial">&quot;</span>
  <span class="synStatement">else</span>
    <span class="synComment"># ValidationエラーなどでDBに保存できない場合 new.html.erb を再表示</span>
    render <span class="synSpecial">'</span><span class="synConstant">new</span><span class="synSpecial">'</span>
  <span class="synStatement">end</span>

  <span class="synStatement">private</span>
    <span class="synComment"># Rails4からStrongParamaterと呼ばれる機能が追加されました。</span>
    <span class="synComment"># セキュリティのため、permitメソッドで許可したパラメータ名しか取得できません。</span>
    <span class="synPreProc">def</span> <span class="synIdentifier">user_params</span>
      params.require(<span class="synConstant">:user</span>).permit(<span class="synConstant">:name</span>, <span class="synConstant">:email</span>)
    <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre><p><br />
以上です。</p>

</div>
</div>
        
      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nipe880324">nipe880324</span></span>
        <span class="entry-footer-time"><a href="entry/20140727/1406448610.html"><time data-relative datetime="2014-07-27T08:10:10Z" title="2014-07-27T08:10:10Z" pubdate class="updated">2014-07-27 17:10</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <a href="http://b.hatena.ne.jp/entry/http://ruby-rails.hatenadiary.com/entry/20140727/1406448610" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="この記事をはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="この記事をはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    </div>
  
  
  
    <div class="social-button-item">
      <a href="https://twitter.com/search?q=http%3A%2F%2Fruby-rails.hatenadiary.com%2Fentry%2F20140727%2F1406448610" class="social-button-twitter-balloon" target="_blank">
        <span class="social-button-twitter-balloon-list">list</span>
        <i class="social-button-twitter-balloon-arrow-border"></i>
        <u class="social-button-twitter-balloon-arrow"></u>
      </a>
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ruby-rails.hatenadiary.com/entry/20140727/1406448610" data-count="vertical" data-text="Railsのform_forを使ったフォームのController,View,Modelの連携した処理フロー - Rails Webook" data-lang="ja">Tweet</a>
    </div>
  
  
  
  
  
    <div class="social-button-item">
      <a data-pocket-label="pocket" data-save-url="http://ruby-rails.hatenadiary.com/entry/20140727/1406448610" data-pocket-count="vertical" class="pocket-btn" data-lang="en"></a>
    </div>
  
</div>


      
        
          
            
            <div class="google-afc-image test-google-rectangle-ads ">
              
              
                <script>
  var hatenadfp = hatenadfp || {};
  hatenadfp.adUnits = hatenadfp.adUnits || [];
  hatenadfp.adUnits.push(
    
      { unitName: 'blog_user_2nd', size: [[300, 250], [336, 280]], divId: 'google_afc_user_container_3', allowContentMatch: true }
    
  );
  hatenadfp.isNGContent = false;
  
</script>

                <div id="google_afc_user_container_3" class="google_afc_blocklink2_5 google_afc_boder"></div>
                
                  <a href="http://blog.hatena.ne.jp/guide/pro" class="open-pro-modal" data-guide-pro-modal-ad-url="http://hatenablog.com/guide/pro/modal/ad">広告を非表示にする</a>
                
                
              
            </div>
          
        
      

      <div class="customized-footer">

        

      </div>

      <div class="comment-box">
        
        <ul class="comment">
          
             <li class="read-more-comments" style="display: none;"><a>もっと読む (0)</a></li>
          
        </ul>
        
          <a class="leave-comment-title">コメントを書く</a>
        
      </div>
      <!-- enjapan ad -->
      
    </footer>
  </div>
</article>

                

                

              
            
            <!-- rakuten_ad_target_end -->
            <!-- google_ad_section_end -->

            
              <div class="pager autopagerize_insert_before">
                <span class="pager-next">
                  <a href="index-page=1406448610.html" rel="next">次のページ</a>
                </span>
              </div>
            
          
        </div>
      </div>

      
      <aside id="box1">
        <div id="box1-inner">
        </div>
      </aside>

    </div><!-- #wrapper -->

    <aside id="box2">
  
  <div id="box2-inner">
    
      
<div class="hatena-module hatena-module-html">
  <div class="hatena-module-body">
    <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-2736751992834286"
     data-ad-slot="8116686456"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  </div>
</div>

      
      
    
      

<div class="hatena-module hatena-module-profile">
  <div class="hatena-module-title">
    プロフィール
  </div>
  <div class="hatena-module-body">
    
    <a href="about.html" class="profile-icon-link">
      <img src="http://cdn1.www.st-hatena.com/users/ni/nipe880324/profile.gif?1406435422"
      alt="id:nipe880324" class="profile-icon" />
    </a>
    

    
    <span class="id">
      <a href="about.html" class="hatena-id-link"><span data-load-nickname="1" data-user-name="nipe880324">id:nipe880324</span></a>
      
  
    
    
  


    </span>
    

    

    
      <div class="hatena-follow-button-box btn-subscribe js-hatena-follow-button-box"
  
  >

  <a href="index-page=1407168000.html#" class="hatena-follow-button js-hatena-follow-button">
    <span class="subscribing">
      <span class="foreground">読者です</span>
      <span class="background">読者をやめる</span>
    </span>
    <span class="unsubscribing" data-track-name="profile-widget-subscribe-button" data-track-once>
      <span class="foreground">読者になる</span>
      <span class="background">読者になる</span>
    </span>
  </a>
  <div class="subscription-count-box js-subscription-count-box">
    <i></i>
    <u></u>
    <span class="subscription-count js-subscription-count">
    </span>
  </div>
</div>

    

    

    

    
  </div>
</div>

      
      
    
      
<div class="hatena-module hatena-module-entries-access-ranking"
     data-count="4"
     data-display_entry_category="1"
     data-display_entry_image="0"
     data-display_entry_image_size_width="100"
     data-display_entry_image_size_height="100"
     data-display_entry_body_length="0"
     data-display_entry_date="1"
     data-display_bookmark_count="0"
     data-source="access"
>
  <div class="hatena-module-title">
    
      最近のアクセス
    
  </div>
  <div class="hatena-module-body">
    
  </div>
</div>

      
      
    
      
<div class="hatena-module hatena-module-html">
    <div class="hatena-module-title">    </div>
  <div class="hatena-module-body">
    <nav>
  <div class="side-category">
    <span class="side-category-title">Rails 入門</span>
    <ul class="side-category-list">
      <li><a href="entry/20140713/1405251091.html">RailsのためのRuby基礎</a></li>
      <li><a href="entry/20140813/1407915718.html">Rails入門者向け ブログ開発</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Railsコマンド</span>
    <ul class="side-category-list">
      <li><a href="entry/20140713/1405251709.html">rails new / server / console</a></li>
      <li><a href="entry/20150204/1423055537.html">rails new時の有用な6つの設定</a></li>
      <li><a href="entry/20150208/1423391199.html">rails new時のテンプレート</a></li>
      <li><a href="entry/20140802/1406948695.html">rails generate</a></li>
      <li><a href="entry/20141116/1416115266.html">rakeコマンド一覧</a></li>
      <li><a href="entry/20141117/1416225563.html">自前rakeコマンド</a></li>
      <li><a href="entry/20141110/1415623670.html">productionモードで起動</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Route / Controller</span>
    <ul class="side-category-list">
      <li><a href="entry/20140716/1405451238.html">Routing</a></li>
      <li><a href="entry/20140810/1407603600.html">レイアウトファイルを指定</a></li>
      <li><a href="entry/20141125/1416918957.html">ビューを返す(render)</a></li>
      <li><a href="entry/20140808/1407427457.html">リダイレクトする(redirect_to)</a></li>
      <li><a href="entry/20141126/1417012848.html">Strong Parameters</a></li>
      <li><a href="entry/20141129/1417223453.html">フィルタ(before_action, after_action)</a></li>
      <li><a href="entry/20141127/1417086075.html">簡易なメッセージ表示(Flash)</a></li>
      <li><a href="entry/20141130/1417334030.html">セッション(session)</a></li>
      <li><a href="entry/20141201/1417432408.html">リクエストヘッダ、レスポンスヘッダ(request, response)</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Model, Migration</span>
    <ul class="side-category-list">
      <li><a href="entry/20140724/1406142120.html">CRUD</a></li>
      <li><a href="entry/20141203/1417601540.html">1対多関連</a></li>
      <li><a href="entry/20141204/1417688260.html">多対多関連</a></li>
      <li><a href="entry/20141205/1417779929.html">1対1関連</a></li>
      <li><a href="entry/20141206/1417839458.html">STI(単一継承テーブル)</a></li>
      <li><a href="entry/20141207/1417926599.html">ポリモフィック関連</a></li>
      <li><a href="entry/20141208/1418018874.html">複数の子レコードを作成/更新</a></li>
      <li><a href="entry/20140724/1406145303.html">バリデーション(validation)</a></li>
      <li><a href="entry/20140810/1407623400.html">バリデーションエラー(validation errors)</a></li>
      <li><a href="entry/20140814/1407994568.html">スコープ(scope)</a></li>
      <li><a href="entry/20141211/1418301640.html">コールバック(callback)</a></li>
      <li><a href="entry/20150428/1430154446.html">複雑なSELECT文のまとめ</a></li>
      <li><a href="entry/20150710/1436461745.html">enum (Rails 4.1以上)</a></li>
      <li><a href="entry/20141209/1418123425.html">楽観的ロック</a></li>
      <li><a href="entry/20141210/1418207618.html">悲観的ロック</a></li>
      <li><a href="entry/20140810/1407634200.html">Migration(マイグレーション)</a></li>
      <li><a href="entry/20150607/1433606267.html">Postgresとマイグレーション</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">API</span>
    <ul class="side-category-list">
      <li><a href="entry/20150708/1436284476.html">Roar</a></li>
      <li>ActiveSerializer</li>
      <li>Versioning</li>
      <li>CORS</li>
    </ul>
  </div>

  <div class="side-category">
    <span class="side-category-title">View, Helper, Presenter</span>
    <ul class="side-category-list">
      <li><a href="entry/20140810/1407603600.html">レイアウトファイルを指定</a></li>
      <li><a href="entry/20140807/1407419013.html">部分テンプレート</a></li>
      <li><a href="entry/20140727/1406448610.html">フォーム周りのMVC連携フロー</a></li>
      <li><a href="entry/20150113/1421149061.html">ビューヘルパーまとめ(View Helper)</a></li>
      <li><a href="entry/20140802/1406969793.html">フォーマットヘルパー</a></li>
      <li><a href="entry/20140803/1407049200.html">独自ヘルパー作成</a></li>
      <li><a href="entry/20141208/1418018874.html">複数の子レコード(has_many)を作成/更新するフォーム</a></li>
      <li><a href="entry/20141225/1419515057.html">1フォームに複数のSubmitボタンを配置</a></li>
      <li><a href="entry/20140730/1406700205.html">simple_form</a></li>
      <li><a href="entry/20150415/1429031791.html">Draper</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">テンプレートエンジン</span>
    <ul class="side-category-list">
      <li><a href="entry/20140929/1411997071.html">HTMLテンプレートエンジンまとめ</a></li>
      <li><a href="entry/20140929/1411997071.html">Slim</a></li>
      <li><a href="entry/20141001/1412097051.html">Haml</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">ActionSupport / ActionMailer / ActiveJob / i18n</span>
    <ul class="side-category-list">
      <li><a href="entry/20141217/1418817120.html">タイムゾーン、時刻処理</a></li>
      <li><a href="entry/20141218/1418901424.html">Timecop 時刻処理のテスト</a></li>
      <li><a href="entry/20141216/1418729961.html">クラス名,DB名,ファイル名の変換</a></li>
      <li><a href="entry/20141230/1419936984.html">JSON, XML, YAMLの読み書き</a></li>
      <li><a href="entry/20141030/1414599853.html">文字コード/エンコード</a></li>
      <li><a href="entry/20140828/1409236436.html">メール送信</a></li>
      <li><a href="entry/20150304/1425396671.html">DelayedJob バックグラウンド処理</a></li>
      <li><a href="entry/20150110/1420863998.html">ログ・ログレベル・ログフォーマット(log, logger)</a></li>
      <li><a href="entry/20150226/1424937175.html">i18nまとめ</a></li>
      <li><a href="entry/20141111/1415707101.html">エラーハンドリング</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">テスト</span>
    <ul class="side-category-list">
      <li><a href="entry/20150101/1420093487.html">RSpec/Capybaraの導入方法</a></li>
      <li><a href="entry/20150103/1420280252.html">RSpec/Capybaraのレシピ集</a></li>
      <li><a href="entry/20150101/1420093487.html">FactoryGirlのレシピ集</a></li>
      <li><a href="entry/20150105/1420465062.html">Jasmine(Javascriptの単体テスト)</a></li>
      <li><a href="entry/20150108/1420675366.html">APIの作成とテスト</a></li>
      <li><a href="entry/20150106/1420545920.html">RSpecテストを速くする</a></li>
      <li><a href="entry/20150108/1420721205.html">デバッグ(debug)</a></li>
      <li><a href="entry/20150420/1429462755.html">Seleniumでスタンドアローンなテスト</a></li>
      <li><a href="entry/20140719/1405708234.html">Cucumber+RSpec+Capybara インストール</a></li>
      <li><a href="entry/20140719/1405777918.html">Cucumber+RSpec+Capybara BDD/TDD開発例</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Security</span>
    <ul class="side-category-list">
      <li><a href="entry/20141215/1418641291.html">ログ上での秘密情報のフィルタリング</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">パフォーマンス</span>
    <ul class="side-category-list">
      <li><a href="entry/20141109/1415522242.html">Bullet</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">設定</span>
    <ul class="side-category-list">
      <li><a href="entry/20141224/1419414316.html">新しいEnvironmentを追加</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">UI/UX</span>
    <ul class="side-category-list">
      <li><a href="entry/20140801/1406818800.html">Twitter Bootstrap 3</a></li>
      <li><a href="entry/20141112/1415804076.html">select2</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Gemの基礎</span>
    <ul class="side-category-list">
      <li><a href="entry/20140715/1405361727.html">RubyGemsの選び方</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">ログイン/認証機能</span>
    <ul class="side-category-list">
      <li><a href="entry/20140801/1406907000.html">devise1 インストール</a></li>
      <li><a href="entry/20140804/1407168000.html">devise2 カスタマイズ</a></li>
      <li><a href="entry/20140805/1407200400.html">devise3 Twitterでログイン(OAuth連携)</a></li>
      <li><a href="entry/20141212/1418380288.html">devise4 ゲストユーザー(Guest)作成</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">ファイルアップロード機能</span>
    <ul class="side-category-list">
      <li><a href="entry/20140716/1405443484.html">PaperClip</a></li>
      <li><a href="entry/20141015/1413300088.html">CarrierWave1 インストール</a></li>
      <li><a href="entry/20141022/1413907332.html">CarrierWave2 カスタマイズ</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">検索機能・Elasticsearch</span>
    <ul class="side-category-list">
      <li><a href="entry/20141008/1412774436.html">Ransack 検索機能</a></li>
      <li><a href="entry/20150224/1424776132.html">Sunspot 全文検索</a></li>
      <li><a href="entry/20151018/1445142266.html">Elasticsearch 1: 全文検索・フィルタ</a></li>
      <li><a href="entry/20151019/1445265581.html">Elasticsearch 2: ページネーション</a></li>
      <li><a href="entry/20151021/1445353566.html">Elasticsearch 3: ソート</a></li>
      <li><a href="entry/20151022/1445439798.html">Elasticsearch 4: アグリゲーション（ファセット）・post_filter</a></li>
      <li><a href="20151025/1445703231.html">Elasticsearch 5: ハイライト</a></li>
      <li><a href="entry/20151027/1445957667.html">Elasticsearch 6: サジェスト</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">ページネーション</span>
    <ul class="side-category-list">
      <li><a href="entry/20141118/1416314608.html">ページネーションまとめ</a></li>
      <li><a href="entry/20141113/1415874683.html">kaminari</a></li>
      <li><a href="entry/20141114/1415967206.html">will_paginate</a></li>
      <li><a href="entry/20141115/1416021886.html">動的ページロード</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">CSV</span>
    <ul class="side-category-list">
      <li><a href="entry/20141119/1416398472.html">CSVダウンロード</a></li>
      <li><a href="entry/20141120/1416483136.html">CSVアップロード</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">PDFファイル作成機能</span>
    <ul class="side-category-list">
      <li><a href="entry/20140906/1409995011.html">PDF作成Gem まとめ</a></li>
      <li><a href="entry/20140907/1410078997.html">コードのみでPDF作成 Prawn</a></li>
      <li><a href="entry/20140908/1410176894.html">HTMLを変換してPDF作成 PDFKit + wkhtmltopdf</a></li>
      <li><a href="entry/20140909/1410241835.html">GUIツールでPDF作成 ThinReports</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">開発効率をあげる</span>
    <ul class="side-category-list">
      <li><a href="entry/20141026/1414289421.html">Spring</a></li>
      <li><a href="entry/20141016/1413389293.html">Guard-LiveReload</a></li>
      <li><a href="entry/20141021/1413819783.html">Guard-RSpec</a></li>
      <li><a href="entry/20141019/1413698128.html">Guard-RuboCop</a></li>
      <li><a href="entry/20141024/1414081224.html">Pry-Rails / Pry-BuyBug</a></li>
      <li><a href="entry/20141024/1414160189.html">Hirb</a></li>
      <li><a href="entry/20141028/1414505988.html">Awesome Print</a></li>
      <li><a href="entry/20141029/1414584929.html">Quiet Assets</a></li>
      <li><a href="entry/20141025/1414225490.html">Better_Errors</a></li>
      <li><a href="entry/20141027/1414409495.html">Rails-ERD</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">その他Gem</span>
    <ul class="side-category-list">
      <li><a href="entry/20150225/1424858414.html">acts-as-taggable-on タグ管理</a></li>
      <li><a href="entry/20141016/1413389293.html">wenerber Cron設定</a></li>
      <li><a href="entry/20150221/1424489524.html">friendly_id URLスラッグ</a></li>
      <li><a href="entry/20150216/1424092796.html">awesome_nested_set ツリー構造</a></li>
      <li><a href="entry/20150217/1424179269.html">awesome_nested_set にjsTreeを追加</a></li>
      <li><a href="entry/20150214/1423923524.html">PaperTrail 取り消し機能</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Tips</span>
    <ul class="side-category-list">
      <li><a href="entry/20141229/1419856433.html">Virtual Attributes(仮想属性)</a></li>
      <li><a href="entry/20141226/1419600679.html">日付/時刻のフォーマット</a></li>
      <li><a href="entry/20141225/1419515057.html">1フォームに複数のSubmitボタンを配置</a></li>
      <li><a href="entry/20141223/1419334845.html">URLのパーマリンクをID以外に変更</a></li>
      <li><a href="entry/20141220/1419058040.html">CSSスタイリングのコントローラー単位で分割</a></li>
      <li><a href="entry/20141219/1418990626.html">ページタイトルの変更</a></li>
      <li><a href="entry/20150101/1420049679.html">Ruby/Railsの便利なメソッド(useful methods)</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Rubyテクニック</span>
    <ul class="side-category-list">
      <li><a href="entry/20150921/1442839934.html">キーワード引数</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">良い設計/リファクタリング</span>
    <ul class="side-category-list">
      <li><a href="entry/20150922/1442923521.html">デメテルの法則(Law of Demeter)</a></li>
      <li><a href="entry/20150312/1426141352.html">HTML/CSS/JSを疎結合にする方法</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">JavaScript</span>
    <ul class="side-category-list">
      <li><a href="entry/20150311/1426062668.html">オブジェクト指向</a></li>
      <li><a href="entry/20150313/1426238835.html">thisの参照先</a></li>
      <li><a href="entry/20150317/1426599220.html">設定データを分離</a></li>
      <li><a href="entry/20150607/1433652441.html">ページを離れる時にアラートを出す</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">jQuery</span>
    <ul class="side-category-list">
      <li><a href="entry/20150325/1427291741.html">Ajax</a></li>
      <li><a href="entry/20150326/1427379215.html">イベント処理(Event)</a></li>
      <li><a href="entry/20150331/1427809820.html">DOM操作</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">React.js</span>
    <ul class="side-category-list">
      <li><a href="entry/20151122/1448118932.html">React.jsチュートリアル: メッセージボックス</a></li>
      <li><a href="entry/20151124/1448300267.html">サーバーレンダリング</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">AngularJS</span>
    <ul class="side-category-list">
      <li><a href="entry/20150114/1421235346.html">AngularJSのインストール</a></li>
      <li><a href="entry/20150115/1421316461.html">UI Bootstrapのインストール</a></li>
      <li><a href="entry/20150116/1421407124.html">AngularJS Controller</a>
      <li><a href="entry/20150119/1421666497.html">ngResource + RailsでAPI作成</a></li>
      <li><a href="entry/20150120/1421761471.html">ngRoute</a></li>
      <li><a href="entry/20150126/1422276839.html">編集可能(Editable)</a></li>
      <li><a href="entry/20150127/1422357163.html">ソート可能(Sortable)</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">開発手法</span>
    <ul class="side-category-list">
      <li><a href="entry/20140917/1410963376.html">スクラム開発</a></li>
      <li><a href="entry/20141010/1412867452.html">カイゼンフレームワークKPT</a>
      <li><a href="entry/20140816/1408126999.html">GitHubを使ったチーム開発フロー</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">開発ツール</span>
    <ul class="side-category-list">
      <li><a href="entry/20141103/1414940400.html">git - 初期設定と便利なエイリアス</a></li>
      <li><a href="entry/20140713/1405248403.html">git - よく使うコマンド</a></li>
      <li><a href="entry/20140724/1406137504.html">SublimeText3 - 便利コマンドとプラグイン</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">DB</span>
    <ul class="side-category-list">
      <li><a href="entry/20140726/1406331785.html">MongoDBの基礎入門 CRUD操作</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">インフラ</span>
    <ul class="side-category-list">
      <li><a href="entry/20150719/1437249020.html">Vagrant</a></li>
      <li><a href="entry/20150721/1437404524.html">Chef(Rails環境構築)</a></li>
      <li><a href="entry/20150314/1426332751.html">Herokuの準備とデプロイ</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">リファレンス</span>
    <ul class="side-category-list">
      <li><a href="https://github.com/" target="_blank">GitHub</a></li>
      <li><a href="http://guides.rubyonrails.org/index.html" target="_blank">RailsGuides</a></li>
      <li><a href="http://railscasts.com/" target="_blank">RailsCast</a></li>
      <li><a href="https://rubygems.org/" target="_blank">RubyGems</a></li>
      <li><a href="https://www.ruby-toolbox.com/" target="_blank">RubyToolbox</a></li>
      <li><a href="http://rubular.com/" target="_blank">正規表現 Rubular</a></li>
      <li><a href="http://ruby-doc.org/core-2.1/" target="_blank">Ruby API (2.1)</a></li>
      <li><a href="http://api.rubyonrails.org/" target="_blank">Ruby on Rails API (4.1)</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">Phoenix</span>
    <ul class="side-category-list">
      <li><a href="entry/20151011/1444560106.html">Phoenix環境設定(Phoenix入門1)</a></li>
      <li><a href="entry/20151013/1444662887.html">基本的な認証機能(Phoenix入門2)</a></li>
      <li><a href="entry/20151016/1444930756.html">基本的なチャット機能(Phoenix入門3)</a></li>
    </ul>
  </div>
  <div class="side-category">
    <span class="side-category-title">その他</span>
    <ul class="side-category-list">
      <li><a href="entry/20150401/1427898898.html">広告収入向上</a></li>
      <li><a href="entry/20140830/1409361710.html">著者が読んだ本</a></li>
    </ul>
  </div>
</nav>

  </div>
</div>

      
      
    
      

<div class="hatena-module hatena-module-archive" data-archive-type="default" data-archive-url="http://ruby-rails.hatenadiary.com/archive">
  <div class="hatena-module-title">
    <a href="archive.html">月別アーカイブ</a>
  </div>
  <div class="hatena-module-body">
  </div>
</div>

      
      
    
    
  </div>
</aside>

  </div>
</div>




        
        
          <script type="text/javascript" src="http://b.hatena.ne.jp/js/hatena_dfp2.js"></script>
        
        
          <div id="bottom-editarea">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
$('.unsubscribing').on('click', function() {
    ga('send', 'event', 'button', 'click', 'hatenaReader');  
});
</script>
          </div>
        
      </div>
    </div>

    
      <footer id="footer" data-brand="hatenablog">
  <div id="footer-inner">
    <address>
      
      <a href="about.html"><img src="http://cdn1.www.st-hatena.com/users/ni/nipe880324/profile.gif" width="16" height="16" alt=""/>
        <span data-load-nickname="1" data-user-name="nipe880324">nipe880324</span>
      </a>
    </address>
    <p class="services">Powered by <a href="http://hatenablog.com/">Hatena Blog</a></p>
  </div>
</footer>

    

    
  <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>


    

    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {"parsetags": "explicit"}
</script>
<script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>



  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-with-addons.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.min.js"></script>


<script type="text/javascript" src="http://cdn7.www.st-hatena.com/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://cdn7.www.st-hatena.com/js/jquery/jquery-ui.1.10.0.custom.min.js"></script>
<script type="text/javascript" src="http://cdn7.www.st-hatena.com/js/jquery/jquery.flot.0.8.3.js"></script>
<script type="text/javascript" src="http://cdn7.www.st-hatena.com/js/jquery/jquery.flot.time.0.8.3.js"></script>



<script id="hatenablog-js" data-env="production"
  type="text/javascript" src="https://blog.st-hatena.com/js/hatenablog.js?version=228df9a6e5a3ae04fdb53d33befa3556" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://blog.st-hatena.com/js/texts-ja.js?version=228df9a6e5a3ae04fdb53d33befa3556"></script>


  <script type="text/javascript">Hatena.Diary.GlobalHeader.init()</script>


<script src="https://www.google.com/recaptcha/api.js" async defer></script>




    


    
       

  <script id="hatena-counter-script" type="text/javascript"><!--
      hatena_counter_name = "nipe880324";
      hatena_counter_id = "102";
      hatena_counter_ref = document.referrer+"";
      hatena_counter_screen = screen.width + "x" + screen.height+","+screen.colorDepth;
  //--></script>
  <script type="text/javascript" src="http://counter.hatena.ne.jp/js/counter.js"></script>
  <noscript><img src="http://counter.hatena.ne.jp/nipe880324/102" border="0" alt="counter"></noscript>


    

  </body>
</html>
